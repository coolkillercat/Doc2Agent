Step 0:
act - **MessageAction** (source=EventSource.USER)
CONTENT: Think step by step to perform the following task related to shopping_admin and map. Answer the question: ***Show me the route and driving time from Allentown, PA to the city where my E-commerce customer Amanda Kim lives***
The site URL for shopping_admin is http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin, use this instead of the normal shopping_admin URL. 
The site URL for map is http://miniserver1875.asuscomm.com:3000, use this instead of the normal map URL. 
For API calling on shopping_admin, use this access token: eyJraWQiOiIxIiwiYWxnIjoiSFMyNTYifQ.eyJ1aWQiOjEsInV0eXBpZCI6MiwiaWF0IjoxNzI5ODU2MTYwLCJleHAiOjE3Mjk4NTk3NjB9.zi-J09uqeQbq--AqS7bBQBFw7M_FhmK_flCwRQhVAE0
For web browsing, You should start from the URL http://miniserver1875.asuscomm.com:3000, and this webpage is already logged in and opened for you.
For shopping_admin, your API calling endpoint is `http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/rest/default`; However, if you are using Web Browsing, the base URL of the website is `http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin` - Be aware of this difference.

For the map website, you will be provided with three sets of APIs, each providing different functionalities; However, if you are using Web Browsing, you should always start from the URL `http://miniserver1875.asuscomm.com:3000` - Be aware of this differences.


Below is the list of all APIs you can use for shopping_admin and their descriptions:
{'delete /V1/addresses/{addressId}': 'Delete customer address by ID.', 'get /V1/adobe_io_events/check_configuration': 'Checks configuration and returns success/failure results for each component', 'get /V1/adobestock/asset/list': 'Search for images based on search criteria', 'get /V1/adobestock/asset/search': 'Get a list of assets', 'delete /V1/adobestock/asset/{id}': 'Delete asset', 'get /V1/adobestock/asset/{id}': 'Get asset by id', 'get /V1/adobestock/search': 'Search for images based on search criteria', 'get /V1/analytics/link': '', 'get /V1/applepay/auth': 'Returns details required to be able to submit a payment with apple pay.', 'get /V1/attributeMetadata/customer': 'Get all attribute metadata.', 'get /V1/attributeMetadata/customer/attribute/{attributeCode}': 'Retrieve attribute metadata.', 'get /V1/attributeMetadata/customer/custom': 'Get custom attributes metadata for the given data interface.', 'get /V1/attributeMetadata/customer/form/{formCode}': 'Retrieve all attributes filtered by form code', 'get /V1/attributeMetadata/customerAddress': 'Get all attribute metadata.', 'get /V1/attributeMetadata/customerAddress/attribute/{attributeCode}': 'Retrieve attribute metadata.', 'get /V1/attributeMetadata/customerAddress/custom': 'Get custom attributes metadata for the given data interface.', 'get /V1/attributeMetadata/customerAddress/form/{formCode}': 'Retrieve all attributes filtered by form code', 'post /V1/braintree/mine/payment/vault': 'Vault a Payment nonce for a customer. Billing address is optional but advised for Card vaulting.', 'get /V1/bulk': 'Lists the bulk operation items that match specified search criteria.', 'get /V1/bulk/{bulkUuid}/detailed-status': 'Get Bulk summary data with list of operations items full data.', 'get /V1/bulk/{bulkUuid}/operation-status/{status}': 'Get operations count by bulk uuid and status.', 'get /V1/bulk/{bulkUuid}/status': 'Get Bulk summary data with list of operations items short data.', 'post /V1/bundle-products/options/add': 'Add new option for bundle product', 'get /V1/bundle-products/options/types': 'Get all types for options for bundle products', 'put /V1/bundle-products/options/{optionId}': 'Add new option for bundle product', 'get /V1/bundle-products/{productSku}/children': 'Get all children for Bundle product', 'put /V1/bundle-products/{sku}/links/{id}': '', 'post /V1/bundle-products/{sku}/links/{optionId}': 'Add child product to specified Bundle option by product sku', 'get /V1/bundle-products/{sku}/options/all': 'Get all options for bundle product', 'get /V1/bundle-products/{sku}/options/{optionId}': 'Get option for bundle product', 'delete /V1/bundle-products/{sku}/options/{optionId}': 'Remove bundle option', 'delete /V1/bundle-products/{sku}/options/{optionId}/children/{childSku}': 'Remove product from Bundle product option', 'post /V1/carts/': 'Creates an empty cart and quote for a guest.', 'get /V1/carts/guest-carts/{cartId}/checkGiftCard/{giftCardCode}': 'Check gift card balance if added to the cart.', 'post /V1/carts/guest-carts/{cartId}/giftCards': 'Add gift card to the cart.', 'delete /V1/carts/guest-carts/{cartId}/giftCards/{giftCardCode}': 'Remove GiftCard Account entity.', 'get /V1/carts/licence': 'Lists active checkout agreements.', 'get /V1/carts/licence/list': 'List of checkout agreements.', 'put /V1/carts/mine': 'Save quote', 'post /V1/carts/mine': 'Creates an empty cart and quote for a specified customer if customer does not have a cart yet.', 'get /V1/carts/mine': 'Returns information for the cart for a specified customer.', 'post /V1/carts/mine/balance/apply': 'Apply store credit', 'get /V1/carts/mine/billing-address': 'Returns the billing address for a specified quote.', 'post /V1/carts/mine/billing-address': 'Assigns a specified billing address to a specified cart.', 'get /V1/carts/mine/checkGiftCard/{giftCardCode}': 'Check gift card balance if applied to given cart.', 'put /V1/carts/mine/collect-totals': 'Set shipping/billing methods and additional data for cart and collect totals.', 'get /V1/carts/mine/coupons': 'Returns information for a coupon in a specified cart.', 'delete /V1/carts/mine/coupons': 'Deletes a coupon from a specified cart.', 'put /V1/carts/mine/coupons/{couponCode}': 'Adds a coupon by code to a specified cart.', 'post /V1/carts/mine/estimate-shipping-methods': 'Estimate shipping by address and return list of available shipping methods', 'post /V1/carts/mine/estimate-shipping-methods-by-address-id': 'Estimate shipping', 'get /V1/carts/mine/gift-message': 'Return the gift message for a specified order.', 'post /V1/carts/mine/gift-message': 'Set the gift message for an entire order.', 'get /V1/carts/mine/gift-message/{itemId}': 'Return the gift message for a specified item in a specified shopping cart.', 'post /V1/carts/mine/gift-message/{itemId}': 'Set the gift message for a specified item in a specified shopping cart.', 'post /V1/carts/mine/giftCards': 'Add gift card to the cart.', 'delete /V1/carts/mine/giftCards/{giftCardCode}': 'Remove GiftCard Account entity', 'get /V1/carts/mine/items': 'Lists items that are assigned to a specified cart.', 'post /V1/carts/mine/items': 'Add/update the specified cart item.', 'put /V1/carts/mine/items/{itemId}': 'Add/update the specified cart item.', 'delete /V1/carts/mine/items/{itemId}': 'Removes the specified item from the specified cart.', 'put /V1/carts/mine/order': 'Places an order for a specified cart.', 'post /V1/carts/mine/payment-information': 'Set payment information and place order for a specified cart.', 'get /V1/carts/mine/payment-information': 'Get payment information', 'get /V1/carts/mine/payment-methods': 'Lists available payment methods for a specified shopping cart. This call returns an array of objects, but detailed information about each object’s attributes might not be included.  See https://developer.adobe.com/commerce/webapi/rest/attributes#PaymentMethodManagementInterface to determine which call to use to get detailed information about all attributes for an object.', 'post /V1/carts/mine/payment-order': 'Create a payment order for logged in customer', 'get /V1/carts/mine/payment-order/{id}': 'Get payment order for logged in customer', 'post /V1/carts/mine/payment-order/{id}': 'Sync payment order for logged in customer', 'post /V1/carts/mine/po-payment-information': 'Set payment information and place purchase order for a specified cart.', 'get /V1/carts/mine/selected-payment-method': 'Returns the payment method for a specified shopping cart.', 'put /V1/carts/mine/selected-payment-method': 'Adds a specified payment method to a specified shopping cart.', 'post /V1/carts/mine/set-payment-information': 'Set payment information for a specified cart.', 'post /V1/carts/mine/shipping-information': '', 'get /V1/carts/mine/shipping-methods': 'Lists applicable shipping methods for a specified quote.', 'get /V1/carts/mine/totals': 'Returns quote totals data for a specified cart.', 'post /V1/carts/mine/totals-information': 'Calculate quote totals based on address and shipping method.', 'get /V1/carts/search': 'Enables administrative users to list carts that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included.  See https://developer.adobe.com/commerce/webapi/rest/attributes#CartRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/carts/{cartId}': 'Enables an administrative user to return information for a specified cart.', 'put /V1/carts/{cartId}': 'Assigns a specified customer to a specified shopping cart.', 'get /V1/carts/{cartId}/billing-address': 'Returns the billing address for a specified quote.', 'post /V1/carts/{cartId}/billing-address': 'Assigns a specified billing address to a specified cart.', 'get /V1/carts/{cartId}/coupons': 'Returns information for a coupon in a specified cart.', 'delete /V1/carts/{cartId}/coupons': 'Deletes a coupon from a specified cart.', 'put /V1/carts/{cartId}/coupons/{couponCode}': 'Adds a coupon by code to a specified cart.', 'post /V1/carts/{cartId}/estimate-shipping-methods': 'Estimate shipping by address and return list of available shipping methods', 'post /V1/carts/{cartId}/estimate-shipping-methods-by-address-id': 'Estimate shipping', 'get /V1/carts/{cartId}/gift-message': 'Return the gift message for a specified order.', 'post /V1/carts/{cartId}/gift-message': 'Set the gift message for an entire order.', 'get /V1/carts/{cartId}/gift-message/{itemId}': 'Return the gift message for a specified item in a specified shopping cart.', 'post /V1/carts/{cartId}/gift-message/{itemId}': 'Set the gift message for a specified item in a specified shopping cart.', 'put /V1/carts/{cartId}/giftCards': 'Add gift card to the cart.', 'delete /V1/carts/{cartId}/giftCards/{giftCardCode}': 'Remove GiftCard Account entity', 'get /V1/carts/{cartId}/items': 'Lists items that are assigned to a specified cart.', 'put /V1/carts/{cartId}/items/{itemId}': 'Add/update the specified cart item.', 'delete /V1/carts/{cartId}/items/{itemId}': 'Removes the specified item from the specified cart.', 'put /V1/carts/{cartId}/order': 'Places an order for a specified cart.', 'get /V1/carts/{cartId}/payment-methods': 'Lists available payment methods for a specified shopping cart. This call returns an array of objects, but detailed information about each object’s attributes might not be included.  See https://developer.adobe.com/commerce/webapi/rest/attributes#PaymentMethodManagementInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/carts/{cartId}/selected-payment-method': 'Returns the payment method for a specified shopping cart.', 'put /V1/carts/{cartId}/selected-payment-method': 'Adds a specified payment method to a specified shopping cart.', 'post /V1/carts/{cartId}/shipping-information': '', 'get /V1/carts/{cartId}/shipping-methods': 'Lists applicable shipping methods for a specified quote.', 'get /V1/carts/{cartId}/totals': 'Returns quote totals data for a specified cart.', 'post /V1/carts/{cartId}/totals-information': 'Calculate quote totals based on address and shipping method.', 'get /V1/carts/{quoteId}/giftCards': 'Return GiftCard Account cards.', 'post /V1/carts/{quoteId}/items': 'Add/update the specified cart item.', 'post /V1/categories': 'Create category service', 'get /V1/categories': 'Retrieve list of categories', 'get /V1/categories/attributes': 'Retrieve all attributes for entity type', 'get /V1/categories/attributes/{attributeCode}': 'Retrieve specific attribute', 'get /V1/categories/attributes/{attributeCode}/options': 'Retrieve list of attribute options', 'get /V1/categories/list': 'Get category list', 'delete /V1/categories/{categoryId}': 'Delete category by identifier', 'get /V1/categories/{categoryId}': 'Get info about category by category id', 'put /V1/categories/{categoryId}/move': 'Move category', 'get /V1/categories/{categoryId}/products': 'Get products assigned to category', 'post /V1/categories/{categoryId}/products': 'Assign a product to the required category', 'put /V1/categories/{categoryId}/products': 'Assign a product to the required category', 'delete /V1/categories/{categoryId}/products/{sku}': 'Remove the product assignment from the category by category id and sku', 'put /V1/categories/{id}': 'Create category service', 'post /V1/cmsBlock': 'Save block.', 'get /V1/cmsBlock/search': 'Retrieve blocks matching the specified criteria.', 'get /V1/cmsBlock/{blockId}': 'Retrieve block.', 'delete /V1/cmsBlock/{blockId}': 'Delete block by ID.', 'put /V1/cmsBlock/{id}': 'Save block.', 'post /V1/cmsPage': 'Save page.', 'get /V1/cmsPage/search': 'Retrieve pages matching the specified criteria.', 'put /V1/cmsPage/{id}': 'Save page.', 'get /V1/cmsPage/{pageId}': 'Retrieve page.', 'delete /V1/cmsPage/{pageId}': 'Delete page by ID.', 'get /V1/company/': 'Returns the list of companies. The list is an array of objects, and detailed information about item attributes might not be included.', 'post /V1/company/': 'Create or update a company account.', 'put /V1/company/assignRoles': 'Change a role for a company user.', 'get /V1/company/role/': 'Returns the list of roles and permissions for a specified company.', 'post /V1/company/role/': 'Create or update a role for a selected company.', 'put /V1/company/role/{id}': 'Create or update a role for a selected company.', 'get /V1/company/role/{roleId}': 'Returns the list of permissions for a specified role.', 'delete /V1/company/role/{roleId}': 'Delete a role.', 'get /V1/company/role/{roleId}/users': 'View the list of company users assigned to a specified role.', 'get /V1/company/{companyId}': 'Returns company details.', 'delete /V1/company/{companyId}': 'Delete a company. Customers belonging to a company are not deleted with this request.', 'put /V1/company/{companyId}': 'Create or update a company account.', 'get /V1/companyCredits/': 'Returns the list of credits for specified companies.', 'get /V1/companyCredits/company/{companyId}': 'Returns data on the credit limit for a specified company.', 'get /V1/companyCredits/history': 'Returns the credit history for one or more companies.', 'put /V1/companyCredits/history/{historyId}': 'Update the PO Number and/or comment for a Reimburse transaction.', 'get /V1/companyCredits/{creditId}': 'Returns data on the credit limit for a specified credit limit ID.', 'post /V1/companyCredits/{creditId}/decreaseBalance': "Decreases the company credit with an Update, Reimburse, or Purchase transaction. This transaction increases company's outstanding balance and decreases company's available credit.", 'post /V1/companyCredits/{creditId}/increaseBalance': "Increases the company credit with an Allocate, Update, Refund, Revert, or Reimburse transaction. This transaction decreases company's outstanding balance and increases company's available credit.", 'put /V1/companyCredits/{id}': 'Update the following company credit attributes: credit currency, credit limit and setting to exceed credit.', 'put /V1/configurable-products/variation': 'Generate variation based on same product', 'post /V1/configurable-products/{sku}/child': '', 'get /V1/configurable-products/{sku}/children': 'Get all children for Configurable product', 'delete /V1/configurable-products/{sku}/children/{childSku}': 'Remove configurable product option', 'post /V1/configurable-products/{sku}/options': 'Save option', 'get /V1/configurable-products/{sku}/options/all': 'Get all options for configurable product', 'get /V1/configurable-products/{sku}/options/{id}': 'Get option for configurable product', 'put /V1/configurable-products/{sku}/options/{id}': 'Save option', 'delete /V1/configurable-products/{sku}/options/{id}': 'Remove option from configurable product', 'post /V1/coupons': 'Save a coupon.', 'post /V1/coupons/deleteByCodes': 'Delete coupon by coupon codes.', 'post /V1/coupons/deleteByIds': 'Delete coupon by coupon ids.', 'post /V1/coupons/generate': 'Generate coupon for a rule', 'get /V1/coupons/search': 'Retrieve a coupon using the specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#CouponRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/coupons/{couponId}': 'Get coupon by coupon id.', 'put /V1/coupons/{couponId}': 'Save a coupon.', 'delete /V1/coupons/{couponId}': 'Delete coupon by coupon id.', 'post /V1/creditmemo': 'Performs persist operations for a specified credit memo.', 'post /V1/creditmemo/refund': 'Prepare creditmemo to refund and save it.', 'put /V1/creditmemo/{id}': 'Cancels a specified credit memo.', 'get /V1/creditmemo/{id}': 'Loads a specified credit memo.', 'get /V1/creditmemo/{id}/comments': 'Lists comments for a specified credit memo.', 'post /V1/creditmemo/{id}/comments': 'Performs persist operations for a specified entity.', 'post /V1/creditmemo/{id}/emails': 'Emails a user a specified credit memo.', 'get /V1/creditmemos': 'Lists credit memos that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#CreditmemoRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'post /V1/customerGroups': 'Save customer group.', 'get /V1/customerGroups/default': 'Get default customer group.', 'put /V1/customerGroups/default/{id}': 'Set system default customer group.', 'get /V1/customerGroups/default/{storeId}': 'Get default customer group.', 'get /V1/customerGroups/search': 'Retrieve customer groups. The list of groups can be filtered to exclude the NOT_LOGGED_IN group using the first parameter and/or it can be filtered by tax class. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#GroupRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/customerGroups/{id}': 'Get customer group by group ID.', 'put /V1/customerGroups/{id}': 'Save customer group.', 'delete /V1/customerGroups/{id}': 'Delete customer group by ID.', 'get /V1/customerGroups/{id}/permissions': 'Check if customer group can be deleted.', 'post /V1/customers': 'Create customer account. Perform necessary business operations like sending email.', 'get /V1/customers/addresses/{addressId}': 'Retrieve customer address.', 'post /V1/customers/confirm': 'Resend confirmation email.', 'post /V1/customers/isEmailAvailable': 'Check if given email is associated with a customer account in given website.', 'put /V1/customers/me': 'Create or update a customer.', 'get /V1/customers/me': 'Get customer by Customer ID.', 'put /V1/customers/me/activate': 'Activate a customer account using a key that was sent in a confirmation email.', 'get /V1/customers/me/billingAddress': 'Retrieve default billing address for the given customerId.', 'put /V1/customers/me/password': 'Change customer password.', 'get /V1/customers/me/shippingAddress': 'Retrieve default shipping address for the given customerId.', 'put /V1/customers/password': 'Send an email to the customer with a password reset link.', 'post /V1/customers/resetPassword': 'Reset customer password.', 'get /V1/customers/search': 'Retrieve customers which match a specified criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#CustomerRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'put /V1/customers/validate': 'Validate customer data.', 'get /V1/customers/{customerId}': 'Get customer by Customer ID.', 'put /V1/customers/{customerId}': 'Create or update a customer.', 'delete /V1/customers/{customerId}': 'Delete customer by Customer ID.', 'get /V1/customers/{customerId}/billingAddress': 'Retrieve default billing address for the given customerId.', 'post /V1/customers/{customerId}/carts': 'Creates an empty cart and quote for a specified customer if customer does not have a cart yet.', 'get /V1/customers/{customerId}/confirm': 'Gets the account confirmation status.', 'get /V1/customers/{customerId}/password/resetLinkToken/{resetPasswordLinkToken}': 'Check if password reset token is valid.', 'get /V1/customers/{customerId}/permissions/readonly': 'Check if customer can be deleted.', 'get /V1/customers/{customerId}/shippingAddress': 'Retrieve default shipping address for the given customerId.', 'put /V1/customers/{email}/activate': 'Activate a customer account using a key that was sent in a confirmation email.', 'get /V1/directory/countries': 'Get all countries and regions information for the store.', 'get /V1/directory/countries/{countryId}': 'Get country and region information for the store.', 'get /V1/directory/currency': 'Get currency information for the store.', 'post /V1/eav/attribute-sets': 'Create attribute set from data', 'get /V1/eav/attribute-sets/list': 'Retrieve list of Attribute Sets This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#AttributeSetRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/eav/attribute-sets/{attributeSetId}': 'Retrieve attribute set information based on given ID', 'delete /V1/eav/attribute-sets/{attributeSetId}': 'Remove attribute set by given ID', 'put /V1/eav/attribute-sets/{attributeSetId}': 'Save attribute set data', 'post /V1/eventing/eventSubscribe': 'Subscribes to the event.', 'put /V1/eventing/updateConfiguration': 'Updates eventing configuration', 'post /V1/gift-wrappings': 'Create/Update new gift wrapping with data object values', 'get /V1/gift-wrappings': 'Return list of gift wrapping data objects based on search criteria', 'get /V1/gift-wrappings/{id}': 'Return data object for specified wrapping ID and store.', 'delete /V1/gift-wrappings/{id}': 'Delete gift wrapping', 'put /V1/gift-wrappings/{wrappingId}': 'Create/Update new gift wrapping with data object values', 'post /V1/giftregistry/mine/estimate-shipping-methods': 'Estimate shipping', 'post /V1/guest-carts': 'Enable an customer or guest user to create an empty cart and quote for an anonymous customer.', 'get /V1/guest-carts/{cartId}': 'Enable a guest user to return information for a specified cart.', 'put /V1/guest-carts/{cartId}': 'Assign a specified customer to a specified shopping cart.', 'get /V1/guest-carts/{cartId}/billing-address': 'Return the billing address for a specified quote.', 'post /V1/guest-carts/{cartId}/billing-address': 'Assign a specified billing address to a specified cart.', 'put /V1/guest-carts/{cartId}/collect-totals': 'Set shipping/billing methods and additional data for cart and collect totals for guest.', 'get /V1/guest-carts/{cartId}/coupons': 'Return information for a coupon in a specified cart.', 'delete /V1/guest-carts/{cartId}/coupons': 'Delete a coupon from a specified cart.', 'put /V1/guest-carts/{cartId}/coupons/{couponCode}': 'Add a coupon by code to a specified cart.', 'post /V1/guest-carts/{cartId}/estimate-shipping-methods': 'Estimate shipping by address and return list of available shipping methods', 'get /V1/guest-carts/{cartId}/gift-message': 'Return the gift message for a specified order.', 'post /V1/guest-carts/{cartId}/gift-message': 'Set the gift message for an entire order.', 'get /V1/guest-carts/{cartId}/gift-message/{itemId}': 'Return the gift message for a specified item in a specified shopping cart.', 'post /V1/guest-carts/{cartId}/gift-message/{itemId}': 'Set the gift message for a specified item in a specified shopping cart.', 'get /V1/guest-carts/{cartId}/items': 'List items that are assigned to a specified cart.', 'post /V1/guest-carts/{cartId}/items': 'Add/update the specified cart item.', 'put /V1/guest-carts/{cartId}/items/{itemId}': 'Add/update the specified cart item.', 'delete /V1/guest-carts/{cartId}/items/{itemId}': 'Remove the specified item from the specified cart.', 'put /V1/guest-carts/{cartId}/order': 'Place an order for a specified cart.', 'post /V1/guest-carts/{cartId}/payment-information': 'Set payment information and place order for a specified cart.', 'get /V1/guest-carts/{cartId}/payment-information': 'Get payment information', 'get /V1/guest-carts/{cartId}/payment-methods': 'List available payment methods for a specified shopping cart. This call returns an array of objects, but detailed information about each object’s attributes might not be included.  See https://developer.adobe.com/commerce/webapi/rest/attributes#GuestPaymentMethodManagementInterface to determine which call to use to get detailed information about all attributes for an object.', 'post /V1/guest-carts/{cartId}/payment-order': 'Create a payment order for guest customer', 'get /V1/guest-carts/{cartId}/payment-order/{id}': 'Get payment order for guest customer', 'post /V1/guest-carts/{cartId}/payment-order/{id}': 'Sync payment order for guest customer', 'get /V1/guest-carts/{cartId}/selected-payment-method': 'Return the payment method for a specified shopping cart.', 'put /V1/guest-carts/{cartId}/selected-payment-method': 'Add a specified payment method to a specified shopping cart.', 'post /V1/guest-carts/{cartId}/set-payment-information': 'Set payment information for a specified cart.', 'post /V1/guest-carts/{cartId}/shipping-information': '', 'get /V1/guest-carts/{cartId}/shipping-methods': 'List applicable shipping methods for a specified quote.', 'get /V1/guest-carts/{cartId}/totals': 'Return quote totals data for a specified cart.', 'post /V1/guest-carts/{cartId}/totals-information': 'Calculate quote totals based on address and shipping method.', 'post /V1/guest-giftregistry/{cartId}/estimate-shipping-methods': 'Estimate shipping', 'put /V1/hierarchy/move/{id}': 'Moves teams and users within the company structure.', 'get /V1/hierarchy/{id}': 'Returns the list of teams and company users in the company structure.', 'post /V1/import/csv': 'Start import operation', 'post /V1/import/json': 'Starts import operation.', 'post /V1/integration/admin/token': 'Create access token for admin given the admin credentials.', 'post /V1/integration/customer/revoke-customer-token': 'Revoke token by customer id.', 'post /V1/integration/customer/token': 'Create access token for admin given the customer credentials.', 'get /V1/inventory/are-product-salable-for-requested-qty/': 'Get whether products are salable in requested Qty for given set of SKUs in specified stock.', 'get /V1/inventory/are-products-salable': 'Get products salable status for given SKUs and given Stock.', 'post /V1/inventory/bulk-partial-source-transfer': 'Run bulk partial inventory transfer for specified items.', 'post /V1/inventory/bulk-product-source-assign': 'Run mass product to source assignment', 'post /V1/inventory/bulk-product-source-transfer': 'Run bulk inventory transfer', 'post /V1/inventory/bulk-product-source-unassign': 'Run mass product to source un-assignment', 'get /V1/inventory/dump-stock-index-data/{salesChannelType}/{salesChannelCode}': 'Provides stock index export from inventory_stock_% table', 'get /V1/inventory/export-stock-salable-qty/{salesChannelType}/{salesChannelCode}': 'Export product stock data filtered by search criteria.', 'get /V1/inventory/get-distance': 'Get distance between two points', 'get /V1/inventory/get-distance-provider-code': 'Get Default distance provider code', 'get /V1/inventory/get-latlng-from-address': 'Get latitude and longitude object from address', 'get /V1/inventory/get-latslngs-from-address': 'Get all available latitude and longitude objects from address.', 'get /V1/inventory/get-product-salable-quantity/{sku}/{stockId}': 'Get Product Quantity for given SKU and Stock', 'get /V1/inventory/get-sources-assigned-to-stock-ordered-by-priority/{stockId}': "Get Sources assigned to Stock ordered by priority If Stock with given id doesn't exist then return an empty array", 'get /V1/inventory/in-store-pickup/pickup-locations/': 'Get Pickup Locations according to the results of filtration by Search Request.', 'get /V1/inventory/is-product-salable-for-requested-qty/{sku}/{stockId}/{requestedQty}': 'Get is product salable for given SKU in a given Stock for a certain Qty', 'get /V1/inventory/is-product-salable/{sku}/{stockId}': 'Get is product in salable for given SKU in a given Stock', 'post /V1/inventory/low-quantity-notification': '', 'get /V1/inventory/low-quantity-notification/{sourceCode}/{sku}': 'Get the source item configuration', 'post /V1/inventory/low-quantity-notifications-delete': 'Delete multiple source items configuration for low quantity', 'get /V1/inventory/source-items': 'Find SourceItems by SearchCriteria We need to have this method for direct work with SourceItems because this object contains additional data like as qty, status (for example can be searchable by additional field)', 'post /V1/inventory/source-items': 'Save Multiple Source item data', 'post /V1/inventory/source-items-delete': 'Delete Multiple Source item data', 'get /V1/inventory/source-selection-algorithm-list': '', 'post /V1/inventory/source-selection-algorithm-result': '', 'get /V1/inventory/sources': 'Find Sources by SearchCriteria SearchCriteria is not required because load all stocks is useful case', 'post /V1/inventory/sources': 'Save Source data', 'get /V1/inventory/sources/{sourceCode}': 'Get Source data by given code. If you want to create plugin on get method, also you need to create separate plugin on getList method, because entity loading way is different for these methods', 'put /V1/inventory/sources/{sourceCode}': 'Save Source data', 'get /V1/inventory/stock-resolver/{type}/{code}': 'Resolve Stock by Sales Channel type and code', 'get /V1/inventory/stock-source-links': 'Find StockSourceLink list by given SearchCriteria', 'post /V1/inventory/stock-source-links': 'Save StockSourceLink list data', 'post /V1/inventory/stock-source-links-delete': 'Remove StockSourceLink list list', 'get /V1/inventory/stocks': 'Find Stocks by given SearchCriteria SearchCriteria is not required because load all stocks is useful case', 'post /V1/inventory/stocks': 'Save Stock data', 'get /V1/inventory/stocks/{stockId}': 'Get Stock data by given stockId. If you want to create plugin on get method, also you need to create separate plugin on getList method, because entity loading way is different for these methods', 'delete /V1/inventory/stocks/{stockId}': 'Delete the Stock data by stockId. If stock is not found do nothing', 'put /V1/inventory/stocks/{stockId}': 'Save Stock data', 'post /V1/invoice/{invoiceId}/refund': 'Create refund for invoice', 'get /V1/invoices': 'Lists invoices that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#InvoiceRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'post /V1/invoices/': 'Performs persist operations for a specified invoice.', 'post /V1/invoices/comments': 'Performs persist operations for a specified invoice comment.', 'get /V1/invoices/{id}': 'Loads a specified invoice.', 'post /V1/invoices/{id}/capture': 'Sets invoice capture.', 'get /V1/invoices/{id}/comments': 'Lists comments for a specified invoice.', 'post /V1/invoices/{id}/emails': 'Emails a user a specified invoice.', 'post /V1/invoices/{id}/void': 'Voids a specified invoice.', 'get /V1/modules': 'Returns an array of enabled modules', 'post /V1/negotiable-cart-item-note': 'Set the note for an item in negotiable quote.', 'get /V1/negotiable-cart-item-note/search': 'Get list of item notes', 'get /V1/negotiable-cart-item-note/{noteId}': 'Get item note by ID', 'delete /V1/negotiable-cart-item-note/{noteId}': 'Delete item note by ID.', 'get /V1/negotiable-carts/{cartId}/billing-address': 'Returns the billing address for a specified quote.', 'post /V1/negotiable-carts/{cartId}/billing-address': 'Assigns a specified billing address to a specified cart.', 'delete /V1/negotiable-carts/{cartId}/coupons': 'Deletes a coupon from a specified cart.', 'put /V1/negotiable-carts/{cartId}/coupons/{couponCode}': 'Adds a coupon by code to a specified cart.', 'post /V1/negotiable-carts/{cartId}/estimate-shipping-methods': 'Estimate shipping by address and return list of available shipping methods', 'post /V1/negotiable-carts/{cartId}/estimate-shipping-methods-by-address-id': 'Estimate shipping', 'post /V1/negotiable-carts/{cartId}/giftCards': '', 'delete /V1/negotiable-carts/{cartId}/giftCards/{giftCardCode}': 'Remove GiftCard Account entity', 'post /V1/negotiable-carts/{cartId}/payment-information': 'Set payment information and place order for a specified cart.', 'get /V1/negotiable-carts/{cartId}/payment-information': 'Get payment information', 'post /V1/negotiable-carts/{cartId}/set-payment-information': 'Set payment information for a specified cart.', 'post /V1/negotiable-carts/{cartId}/shipping-information': '', 'get /V1/negotiable-carts/{cartId}/totals': 'Returns quote totals data for a specified cart.', 'get /V1/negotiableQuote/attachmentContent': 'Returns content for one or more files attached on the quote comment.', 'post /V1/negotiableQuote/decline': 'Decline the B2B quote. All custom pricing will be removed from this quote. The buyer will be able to place an order using their standard catalog prices and discounts.', 'post /V1/negotiableQuote/draft': 'Create a new empty B2B quote with NegotiableQuoteInterface::STATUS_DRAFT_BY_ADMIN status.', 'post /V1/negotiableQuote/pricesUpdated': "Refreshes item prices, taxes, discounts, cart rules in the negotiable quote as per the latest changes in the catalog / shared catalog and in the price rules. Depending on the negotiable quote state and totals, all or just some of quote numbers will be recalculated. 'Update Prices' parameter forces refresh on any quote that is not locked for admin user, including the quotes with a negotiated price. The request can be applied to one or more quotes at the same time.", 'post /V1/negotiableQuote/request': 'Create a B2B quote based on a regular Magento quote. If the B2B quote requires a shipping address (for negotiation or tax calculations), add it to the regular quote before you create a B2B quote.', 'post /V1/negotiableQuote/submitToCustomer': "Submit the B2B quote to the customer. The quote status for the customer will be changed to 'Updated', and the customer can work with the quote.", 'put /V1/negotiableQuote/{quoteId}': 'Save quote', 'get /V1/negotiableQuote/{quoteId}/comments': 'Returns comments for a specified negotiable quote.', 'put /V1/negotiableQuote/{quoteId}/shippingMethod': 'Updates the shipping method on a negotiable quote.', 'post /V1/order/notify-orders-are-ready-for-pickup': 'Notify customer that the orders is ready for pickup.', 'post /V1/order/{orderId}/invoice': '', 'post /V1/order/{orderId}/refund': 'Create offline refund for order', 'post /V1/order/{orderId}/ship': 'Creates new Shipment for given Order.', 'get /V1/orders': 'Lists orders that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#OrderRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'post /V1/orders': 'Performs persist operations for a specified order.', 'put /V1/orders/create': 'Performs persist operations for a specified order.', 'get /V1/orders/items': 'Lists order items that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#OrderItemRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/orders/items/{id}': 'Loads a specified order item.', 'get /V1/orders/{id}': 'Loads a specified order.', 'post /V1/orders/{id}/cancel': 'Cancels a specified order.', 'post /V1/orders/{id}/comments': 'Adds a comment to a specified order.', 'get /V1/orders/{id}/comments': 'Lists comments for a specified order.', 'post /V1/orders/{id}/emails': 'Emails a user a specified order.', 'post /V1/orders/{id}/hold': 'Holds a specified order.', 'get /V1/orders/{id}/statuses': 'Gets the status for a specified order.', 'post /V1/orders/{id}/unhold': 'Releases a specified order from hold status.', 'put /V1/orders/{parent_id}': 'Performs persist operations for a specified order address.', 'get /V1/payments-config/apple-pay/{location}': 'Get Apple Pay Config.', 'get /V1/payments-config/hosted-fields/{location}': 'Get Hosted Fields Config.', 'get /V1/payments-config/smart-buttons/{location}': 'Get Smart Buttons Config.', 'get /V1/payments-config/{location}': 'Get Config.', 'get /V1/payments-sdk/{location}': 'Get payment sdk url by location', 'get /V1/payments-sdk/{location}/{methodCode}': 'Get payment sdk url by location and methodCode', 'post /V1/products': 'Create product', 'get /V1/products': 'Get product list', 'get /V1/products-render-info': 'Collect and retrieve the list of product render info. This info contains raw prices and formatted prices, product name, stock status, store_id, etc.', 'post /V1/products/attribute-sets': 'Create attribute set from data', 'post /V1/products/attribute-sets/attributes': 'Assign attribute to attribute set', 'post /V1/products/attribute-sets/groups': 'Save attribute group', 'get /V1/products/attribute-sets/groups/list': 'Retrieve list of attribute groups', 'delete /V1/products/attribute-sets/groups/{groupId}': 'Remove attribute group by id', 'get /V1/products/attribute-sets/sets/list': 'Retrieve list of Attribute Sets', 'get /V1/products/attribute-sets/{attributeSetId}': 'Retrieve attribute set information based on given ID', 'delete /V1/products/attribute-sets/{attributeSetId}': 'Remove attribute set by given ID', 'put /V1/products/attribute-sets/{attributeSetId}': 'Save attribute set data', 'get /V1/products/attribute-sets/{attributeSetId}/attributes': 'Retrieve related attributes based on given attribute set ID', 'delete /V1/products/attribute-sets/{attributeSetId}/attributes/{attributeCode}': 'Remove attribute from attribute set', 'put /V1/products/attribute-sets/{attributeSetId}/groups': 'Save attribute group', 'get /V1/products/attributes': 'Retrieve all attributes for entity type', 'post /V1/products/attributes': 'Save attribute data', 'get /V1/products/attributes/types': 'Retrieve list of product attribute types', 'get /V1/products/attributes/{attributeCode}': 'Retrieve specific attribute', 'put /V1/products/attributes/{attributeCode}': 'Save attribute data', 'delete /V1/products/attributes/{attributeCode}': 'Delete Attribute by id', 'get /V1/products/attributes/{attributeCode}/is-filterable': "Retrieve 'is_filterable' property for specific attribute as integer", 'put /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}': "Set 'is_filterable' property for specific attribute as integer", 'get /V1/products/attributes/{attributeCode}/options': 'Retrieve list of attribute options', 'post /V1/products/attributes/{attributeCode}/options': 'Add option to attribute', 'delete /V1/products/attributes/{attributeCode}/options/{optionId}': 'Delete option from attribute', 'put /V1/products/attributes/{attributeCode}/options/{optionId}': 'Update attribute option', 'post /V1/products/base-prices': 'Add or update product prices. Input item should correspond \\Magento\\Catalog\\Api\\Data\\CostInterface. If any items will have invalid price, store id or sku, they will be marked as failed and excluded from update list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.', 'post /V1/products/base-prices-information': 'Return product prices. In case of at least one of skus is not found exception will be thrown.', 'post /V1/products/cost': 'Add or update product cost. Input item should correspond to \\Magento\\Catalog\\Api\\Data\\CostInterface. If any items will have invalid cost, store id or sku, they will be marked as failed and excluded from update list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.', 'post /V1/products/cost-delete': 'Delete product cost. In case of at least one of skus is not found exception will be thrown. If error occurred during the delete exception will be thrown.', 'post /V1/products/cost-information': 'Return product prices. In case of at least one of skus is not found exception will be thrown.', 'delete /V1/products/downloadable-links/samples/{id}': 'Delete downloadable sample', 'delete /V1/products/downloadable-links/{id}': 'Delete downloadable link', 'get /V1/products/links/types': 'Retrieve information about available product link types', 'get /V1/products/links/{type}/attributes': 'Provide a list of the product link type attributes', 'get /V1/products/media/types/{attributeSetName}': 'Retrieve the list of media attributes (fronted input type is media_image) assigned to the given attribute set.', 'post /V1/products/options': 'Save Custom Option', 'get /V1/products/options/types': 'Get custom option types', 'put /V1/products/options/{optionId}': 'Save Custom Option', 'post /V1/products/special-price': "Add or update product's special price. If any items will have invalid price, store id, sku or dates, they will be marked as failed and excluded from update list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.", 'post /V1/products/special-price-delete': "Delete product's special price. If any items will have invalid price, store id, sku or dates, they will be marked as failed and excluded from delete list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the delete exception will be thrown.", 'post /V1/products/special-price-information': "Return product's special price. In case of at least one of skus is not found exception will be thrown.", 'post /V1/products/tier-prices': 'Add or update product prices. If any items will have invalid price, price type, website id, sku, customer group or quantity, they will be marked as failed and excluded from update list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.', 'put /V1/products/tier-prices': 'Remove existing tier prices and replace them with the new ones. If any items will have invalid price, price type, website id, sku, customer group or quantity, they will be marked as failed and excluded from replace list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.', 'post /V1/products/tier-prices-delete': 'Delete product tier prices. If any items will have invalid price, price type, website id, sku, customer group or quantity, they will be marked as failed and excluded from delete list and \\Magento\\Catalog\\Api\\Data\\PriceUpdateResultInterface[] with problem description will be returned. If there were no failed items during update empty array will be returned. If error occurred during the update exception will be thrown.', 'post /V1/products/tier-prices-information': 'Return product prices. In case of at least one of skus is not found exception will be thrown.', 'get /V1/products/types': 'Retrieve available product types', 'put /V1/products/{productSku}/stockItems/{itemId}': '', 'put /V1/products/{sku}': 'Create product', 'delete /V1/products/{sku}': '', 'get /V1/products/{sku}': 'Get info about product by product SKU', 'get /V1/products/{sku}/downloadable-links': 'List of links with associated samples', 'post /V1/products/{sku}/downloadable-links': 'Update downloadable link of the given product (link type and its resources cannot be changed)', 'get /V1/products/{sku}/downloadable-links/samples': 'List of samples for downloadable product', 'post /V1/products/{sku}/downloadable-links/samples': 'Update downloadable sample of the given product', 'put /V1/products/{sku}/downloadable-links/samples/{id}': 'Update downloadable sample of the given product', 'put /V1/products/{sku}/downloadable-links/{id}': 'Update downloadable link of the given product (link type and its resources cannot be changed)', 'get /V1/products/{sku}/group-prices/{customerGroupId}/tiers': 'Get tier price of product', 'delete /V1/products/{sku}/group-prices/{customerGroupId}/tiers/{qty}': 'Remove tier price from product', 'post /V1/products/{sku}/group-prices/{customerGroupId}/tiers/{qty}/price/{price}': 'Create tier price for product', 'post /V1/products/{sku}/links': 'Assign a product link to another product', 'put /V1/products/{sku}/links': 'Save product link', 'get /V1/products/{sku}/links/{type}': 'Provide the list of links for a specific product', 'delete /V1/products/{sku}/links/{type}/{linkedProductSku}': '', 'post /V1/products/{sku}/media': 'Create new gallery entry', 'get /V1/products/{sku}/media': 'Retrieve the list of gallery entries associated with given product', 'get /V1/products/{sku}/media/{entryId}': 'Return information about gallery entry', 'put /V1/products/{sku}/media/{entryId}': 'Update gallery entry', 'delete /V1/products/{sku}/media/{entryId}': 'Remove gallery entry', 'get /V1/products/{sku}/options': 'Get the list of custom options for a specific product', 'get /V1/products/{sku}/options/{optionId}': 'Get custom option for a specific product', 'delete /V1/products/{sku}/options/{optionId}': '', 'post /V1/products/{sku}/websites': 'Assign a product to the website', 'put /V1/products/{sku}/websites': 'Assign a product to the website', 'delete /V1/products/{sku}/websites/{websiteId}': 'Remove the website assignment from the product by product sku', 'post /V1/purchase-order-carts/{cartId}/billing-address': 'Assigns a specified billing address to a specified cart.', 'post /V1/purchase-order-carts/{cartId}/estimate-shipping-methods': 'Estimate shipping by address and return list of available shipping methods', 'post /V1/purchase-order-carts/{cartId}/estimate-shipping-methods-by-address-id': 'Estimate shipping', 'post /V1/purchase-order-carts/{cartId}/giftCards': 'Add gift card to the cart.', 'delete /V1/purchase-order-carts/{cartId}/giftCards/{giftCardCode}': 'Remove GiftCard Account entity', 'post /V1/purchase-order-carts/{cartId}/payment-information': 'Set payment information and place order for a specified cart.', 'get /V1/purchase-order-carts/{cartId}/payment-information': 'Get payment information', 'post /V1/purchase-order-carts/{cartId}/set-payment-information': 'Set payment information for a specified cart.', 'get /V1/purchase-order-carts/{cartId}/totals': 'Returns quote totals data for a specified cart.', 'post /V1/requisition_lists': 'Save Requisition List', 'post /V1/returns': 'Save RMA', 'get /V1/returns': 'Return list of rma data objects based on search criteria', 'get /V1/returns/{id}': 'Return data object for specified RMA id', 'delete /V1/returns/{id}': 'Delete RMA', 'put /V1/returns/{id}': 'Save RMA', 'post /V1/returns/{id}/comments': 'Add comment', 'get /V1/returns/{id}/comments': 'Comments list', 'get /V1/returns/{id}/labels': 'Get shipping label int the PDF format', 'post /V1/returns/{id}/tracking-numbers': 'Add track', 'get /V1/returns/{id}/tracking-numbers': 'Get track list', 'delete /V1/returns/{id}/tracking-numbers/{trackId}': 'Remove track by id', 'get /V1/returnsAttributeMetadata': 'Get all attribute metadata.', 'get /V1/returnsAttributeMetadata/custom': "Get custom attribute metadata for the given Data object's attribute set", 'get /V1/returnsAttributeMetadata/form/{formCode}': 'Retrieve all attributes filtered by form code', 'get /V1/returnsAttributeMetadata/{attributeCode}': 'Retrieve attribute metadata.', 'post /V1/reward/mine/use-reward': 'Set reward points to quote', 'post /V1/salesRules': 'Save sales rule.', 'get /V1/salesRules/search': 'Retrieve sales rules that match te specified criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#RuleRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/salesRules/{ruleId}': 'Get rule by ID.', 'put /V1/salesRules/{ruleId}': 'Save sales rule.', 'delete /V1/salesRules/{ruleId}': 'Delete rule by ID.', 'get /V1/search': 'Make Full Text Search and return found Documents', 'post /V1/sharedCatalog': 'Create or update Shared Catalog service.', 'get /V1/sharedCatalog/': 'Return the list of shared catalogs and basic properties for each catalog.', 'put /V1/sharedCatalog/{id}': 'Create or update Shared Catalog service.', 'post /V1/sharedCatalog/{id}/assignCategories': 'Add categories into the shared catalog.', 'post /V1/sharedCatalog/{id}/assignProducts': 'Add products into the shared catalog.', 'get /V1/sharedCatalog/{id}/categories': 'Return the list of categories in the selected shared catalog.', 'get /V1/sharedCatalog/{id}/products': 'Return the list of product SKUs in the selected shared catalog.', 'post /V1/sharedCatalog/{id}/unassignCategories': 'Remove the specified categories from the shared catalog.', 'post /V1/sharedCatalog/{id}/unassignProducts': 'Remove the specified products from the shared catalog.', 'get /V1/sharedCatalog/{sharedCatalogId}': 'Return the following properties for the selected shared catalog: ID, Store Group ID, Name, Type, Description, Customer Group, Tax Class.', 'delete /V1/sharedCatalog/{sharedCatalogId}': 'Delete a shared catalog by ID.', 'post /V1/sharedCatalog/{sharedCatalogId}/assignCompanies': 'Assign companies to a shared catalog.', 'post /V1/sharedCatalog/{sharedCatalogId}/assignTierPrices': 'Assign custom prices', 'get /V1/sharedCatalog/{sharedCatalogId}/companies': 'Return the list of company IDs for the companies assigned to the selected catalog.', 'post /V1/sharedCatalog/{sharedCatalogId}/resetTierPrices': 'Reset custom prices', 'post /V1/sharedCatalog/{sharedCatalogId}/unassignCompanies': 'Unassign companies from a shared catalog.', 'post /V1/shipment/': 'Performs persist operations for a specified shipment.', 'post /V1/shipment/track': 'Performs persist operations for a specified shipment track.', 'delete /V1/shipment/track/{id}': 'Deletes a specified shipment track by ID.', 'get /V1/shipment/{id}': 'Loads a specified shipment.', 'get /V1/shipment/{id}/comments': 'Lists comments for a specified shipment.', 'post /V1/shipment/{id}/comments': 'Performs persist operations for a specified shipment comment.', 'post /V1/shipment/{id}/emails': 'Emails user a specified shipment.', 'get /V1/shipment/{id}/label': 'Gets a specified shipment label.', 'get /V1/shipments': 'Lists shipments that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#ShipmentRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/stockItems/lowStock/': "Retrieves a list of SKU's with low inventory qty", 'get /V1/stockItems/{productSku}': '', 'get /V1/stockStatuses/{productSku}': '', 'get /V1/store/storeConfigs': '', 'get /V1/store/storeGroups': 'Retrieve list of all groups', 'get /V1/store/storeViews': 'Retrieve list of all stores', 'get /V1/store/websites': 'Retrieve list of all websites', 'post /V1/taxClasses': 'Create a Tax Class', 'get /V1/taxClasses/search': 'Retrieve tax classes which match a specific criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#TaxClassRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'put /V1/taxClasses/{classId}': 'Create a Tax Class', 'get /V1/taxClasses/{taxClassId}': 'Get a tax class with the given tax class id.', 'delete /V1/taxClasses/{taxClassId}': 'Delete a tax class with the given tax class id.', 'post /V1/taxRates': 'Create or update tax rate', 'put /V1/taxRates': 'Create or update tax rate', 'get /V1/taxRates/search': 'Search TaxRates This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#TaxRateRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/taxRates/{rateId}': 'Get tax rate', 'delete /V1/taxRates/{rateId}': 'Delete tax rate', 'post /V1/taxRules': 'Save TaxRule', 'put /V1/taxRules': 'Save TaxRule', 'get /V1/taxRules/search': 'Search TaxRules This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#TaxRuleRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'delete /V1/taxRules/{ruleId}': 'Delete TaxRule', 'get /V1/taxRules/{ruleId}': 'Get TaxRule', 'get /V1/team/': 'Returns the list of teams for the specified search criteria (team name or description).', 'post /V1/team/{companyId}': 'Create a team in the company structure.', 'get /V1/team/{teamId}': 'Returns data for a team in the company, by entity id.', 'delete /V1/team/{teamId}': 'Delete a team from the company structure.', 'put /V1/team/{teamId}': 'Update a team in the company structure.', 'put /V1/tfa/default-provider-code/{userId}': 'Set default provider code', 'get /V1/tfa/default-provider-code/{userId}': 'Get default provider', 'get /V1/tfa/forced-providers': 'Retrieve forced providers list', 'get /V1/tfa/installed-providers': 'Get a list of providers', 'post /V1/tfa/provider/authy/activate': 'Activate the provider and get an admin token', 'post /V1/tfa/provider/authy/authenticate': 'Get an admin token using authy 2fa', 'post /V1/tfa/provider/authy/authenticate-onetouch': 'Authenticate using the present one touch response and get an admin token', 'post /V1/tfa/provider/authy/configure': 'Get the information required to configure google', 'post /V1/tfa/provider/authy/send-token/{via}': 'Send a one time password to a device using authy', 'post /V1/tfa/provider/duo_security/activate': 'Activate the provider and get an admin token', 'post /V1/tfa/provider/duo_security/authenticate': 'Authenticate and get an admin token', 'post /V1/tfa/provider/duo_security/configure': 'Get the information required to configure duo', 'post /V1/tfa/provider/duo_security/get-authentication-data': 'Get the information required to configure duo', 'post /V1/tfa/provider/google/activate': 'Activate the provider and get an admin token', 'post /V1/tfa/provider/google/authenticate': 'Get an admin token by authenticating using google', 'post /V1/tfa/provider/google/configure': 'Get the information required to configure google', 'post /V1/tfa/provider/u2fkey/activate': 'Activate the provider and get a token', 'post /V1/tfa/provider/u2fkey/authentication-challenge': 'Get the information to initiate a WebAuthn registration ceremony', 'post /V1/tfa/provider/u2fkey/configure': 'Get the information to initiate a WebAuthn registration ceremony', 'post /V1/tfa/provider/u2fkey/verify': 'Authenticate with the provider and get a token', 'get /V1/tfa/providers-to-activate/{userId}': 'Returns a list of providers to configure/enroll', 'get /V1/tfa/tfat-providers-to-activate': 'Get the providers that the user still needs to configure', 'get /V1/tfa/tfat-user-providers': 'Get the providers that the user is able to use for 2fa', 'get /V1/tfa/user-providers/{userId}': 'Get a user provider', 'put /V1/tfa/user-providers/{userId}': 'Set providers', 'get /V1/transactions': 'Lists transactions that match specified search criteria. This call returns an array of objects, but detailed information about each object’s attributes might not be included. See https://developer.adobe.com/commerce/webapi/rest/attributes#TransactionRepositoryInterface to determine which call to use to get detailed information about all attributes for an object.', 'get /V1/transactions/{id}': 'Loads a specified transaction.', 'get /V2/carts/mine/coupons': 'Returns information for all coupons in a specified cart.', 'post /V2/carts/mine/coupons': 'Append the coupon code(s) to cart', 'put /V2/carts/mine/coupons': 'Replace the coupon code(s) in cart with the new code(s)', 'post /V2/carts/mine/coupons/deleteByCodes': 'Deletes coupon(s) from a specified cart.', 'get /V2/carts/{cartId}/coupons': 'Returns information for all coupons in a specified cart.', 'post /V2/carts/{cartId}/coupons': 'Append the coupon code(s) to cart', 'put /V2/carts/{cartId}/coupons': 'Replace the coupon code(s) in cart with the new code(s)', 'post /V2/carts/{cartId}/coupons/deleteByCodes': 'Deletes coupon(s) from a specified cart.'}

Below is the list of all APIs you can use for map and their descriptions:
Below is all the documentation on how to use the http://metis.lti.cs.cmu.edu:{profile}/{service}/v1/test/ endpoints.
# OSRM HTTP Router

## General options

All OSRM HTTP requests use a common structure.

The following syntax applies to all services, except as noted.

### Requests

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/{service}/v1/test/{coordinates}[.{format}]?option=value&option=value
```

| Parameter | Description |
| --- | --- |
| `profile` | Mode of transportation. One of the following three values: `5000` for car (driving), `5001` for bicycle (biking), and `5002` for foot (walking). |
| `service` | One of the following values: [`route`](#route-service), [`nearest`](#nearest-service), [`table`](#table-service), [`match`](#match-service), [`trip`](#trip-service), [`tile`](#tile-service) |
| `coordinates`| String of format `{longitude},{latitude};{longitude},{latitude}[;{longitude},{latitude} ...]` or `polyline({polyline}) or polyline6({polyline6})`. |
| `format`| `json` or `flatbuffers`. This parameter is optional and defaults to `json`. |

Passing any `option=value` is optional. `polyline` follows Google's polyline format with precision 5 by default and can be generated using [this package](https://www.npmjs.com/package/polyline).

To pass parameters to each location some options support an array-like encoding:

**Request options**

| Option         | Values                                                 | Description                                                                                                                                                                                               |
|----------------|--------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|bearings        |`{bearing};{bearing}[;{bearing} ...]`                   |Limits the search to segments with given bearing in degrees towards true north in a clockwise direction.                                                                                                     |
|radiuses        |`{radius};{radius}[;{radius} ...]`                      |Limits the search to given radius in meters.                                                                                                                                                               |
|generate\_hints |`true` (default), `false`                               |Adds a Hint to the response which can be used in subsequent requests, see `hints` parameter.                                                                                                               |
|hints           |`{hint};{hint}[;{hint} ...]`                            |Hint from previous request to derive position in street network.                                                                                                                                           |
|approaches      |`{approach};{approach}[;{approach} ...]`                |Restrict the direction on the road network at a waypoint, relative to the input coordinate.                                                                                                                    |
|exclude         |`{class}[,{class}]`                                     |Additive list of classes to avoid, the order does not matter.                                                                                                                                                  |
|snapping        |`default` (default), `any`                              |Default snapping avoids is_startpoint (see profile) edges, `any` will snap to any edge in the graph                                                                                                        |
|skip_waypoints  |`true`, `false` (default)                               |Removes waypoints from the response. Waypoints are still calculated, but not serialized. Could be useful in case you are interested in some other part of the response and do not want to transfer waste data. |

Where the elements follow the following format:

| Element    | Values                                                 |
|------------|--------------------------------------------------------|
|bearing     |`{value},{range}` `integer 0 .. 360,integer 0 .. 180`   |
|radius      |`double >= 0` or `unlimited` (default)                  |
|hint        |Base64 `string`                                         |
|approach    |`curb`, `opposite` or `unrestricted` (default)          |
|class       |A class name determined by the profile or `none`.       |

```
{option}={element};{element}[;{element} ... ]
```

The number of elements must match exactly the number of locations (except for `generate_hints` and `exclude`). If you don't want to pass a value but instead use the default you can pass an empty `element`.

Example: 2nd location uses the default value for `option`:

```
{option}={element};;{element}
```

#### Example Requests

```curl
# Query on Berlin with three coordinates:
curl 'http://metis.lti.cs.cmu.edu:5000/route/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?overview=false'

# Query on Berlin excluding the usage of motorways:
curl 'http://metis.lti.cs.cmu.edu:5000/route/v1/test/13.388860,52.517037;13.397634,52.529407?exclude=motorway'

# Using polyline:
curl 'http://metis.lti.cs.cmu.edu:5000/route/v1/test/polyline(ofp_Ik_vpAilAyu@te@g`E)?overview=false'
```

### Responses

#### Code

Every response object has a `code` property containing one of the strings below or a service dependent code:

| Type              | Description                                                                      |
|-------------------|----------------------------------------------------------------------------------|
| `Ok`              | Request could be processed as expected.                                          |
| `InvalidUrl`      | URL string is invalid.                                                           |
| `InvalidService`  | Service name is invalid.                                                         |
| `InvalidVersion`  | Version is not found.                                                            |
| `InvalidOptions`  | Options are invalid.                                                             |
| `InvalidQuery`    | The query string is syntactically malformed.                                     |
| `InvalidValue`    | The successfully parsed query parameters are invalid.                            |
| `NoSegment`       | One of the supplied input coordinates could not snap to the street segment.      |
| `TooBig`          | The request size violates one of the service-specific request size restrictions. |
| `DisabledDataset` | The request tried to access a disabled dataset.                                  |

- `message` is a **optional** human-readable error message. All other status types are service-dependent.
- In case of an error the HTTP status code will be `400`. Otherwise, the HTTP status code will be `200` and `code` will be `Ok`.

#### Data version

Every response object has a `data_version` property containing a timestamp from the original OpenStreetMap file. This field is optional. 

#### Example response

```json
{
"code": "Ok",
"message": "Everything worked",
"data_version": "2017-11-17T21:43:02Z"
}
```


## Services

### Nearest service

Snaps a coordinate to the street network and returns the nearest `n` matches.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/nearest/v1/test/{coordinates}.json?number={number}
```

Where `coordinates` only supports a single `{longitude},{latitude}` entry.

In addition to the [general options](#general-options) the following options are supported for this service:

|Option      |Values                        |Description                                         |
|------------|------------------------------|----------------------------------------------------|
|number      |`integer >= 1` (default `1`)  |Number of nearest segments that should be returned. |

As `waypoints` is a single thing, returned by that service, using it with the option `skip_waypoints` set to `true` is quite useless, but still
possible. In that case, only the `code` field will be returned.

**Response**

- `code` if the request was successful `Ok` otherwise see the service dependent and general status codes.
- `waypoints` array of `Waypoint` objects sorted by distance to the input coordinate. Each object has at least the following additional properties:
  - `nodes`: Array of OpenStreetMap node ids.

#### Example Requests

```curl
# Querying nearest three snapped locations of `13.388860,52.517037` with a bearing between `20° - 340°`.
curl 'http://metis.lti.cs.cmu.edu:5000/nearest/v1/test/13.388860,52.517037?number=3&bearings=0,20'
```

#### Example Response

```JSON
{
   "waypoints" : [
      {
         "nodes": [
            2264199819,
            0
         ],
         "hint" : "KSoKADRYroqUBAEAEAAAABkAAAAGAAAAAAAAABhnCQCLtwAA_0vMAKlYIQM8TMwArVghAwEAAQH1a66g",
         "distance" : 4.152629,
         "name" : "Friedrichstraße",
         "location" : [
            13.388799,
            52.517033
         ]
      },
      {
         "nodes": [
            2045820592,
            0
         ],
         "hint" : "KSoKADRYroqUBAEABgAAAAAAAAAAAAAAKQAAABhnCQCLtwAA7kvMAAxZIQM8TMwArVghAwAAAQH1a66g",
         "distance" : 11.811961,
         "name" : "Friedrichstraße",
         "location" : [
            13.388782,
            52.517132
         ]
      },
      {
         "nodes": [
            0,
            21487242
         ],
         "hint" : "KioKgDbbDgCUBAEAAAAAABoAAAAAAAAAPAAAABlnCQCLtwAA50vMADJZIQM8TMwArVghAwAAAQH1a66g",
         "distance" : 15.872438,
         "name" : "Friedrichstraße",
         "location" : [
            13.388775,
            52.51717
         ],
      }
   ],
   "code" : "Ok"
}
```

### Route service

Finds the fastest route between coordinates in the supplied order.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/route/v1/test/{coordinates}?alternatives={true|false|number}&steps={true|false}&geometries={polyline|polyline6|geojson}&overview={full|simplified|false}&annotations={true|false}

```

In addition to the [general options](#general-options) the following options are supported for this service:

|Option      |Values                                       |Description                                                                    |
|------------|---------------------------------------------|-------------------------------------------------------------------------------|
|alternatives|`true`, `false` (default), or Number         |Search for alternative routes. Passing a number `alternatives=n` searches for up to `n` alternative routes.\*                            |
|steps       |`true`, `false` (default)                    |Returned route steps for each route leg                                        |
|annotations |`true`, `false` (default), `nodes`, `distance`, `duration`, `datasources`, `weight`, `speed`  |Returns additional metadata for each coordinate along the route geometry.      |
|geometries  |`polyline` (default), `polyline6`, `geojson` |Returned route geometry format (influences overview and per step)              |
|overview    |`simplified` (default), `full`, `false`      |Add overview geometry either full, simplified according to highest zoom level it could be display on, or not at all.|
|continue\_straight |`default` (default), `true`, `false`  |Forces the route to keep going straight at waypoints constraining uturns there even if it would be faster. Default value depends on the profile. |
|waypoints   | `{index};{index};{index}...`                |Treats input coordinates indicated by given indices as waypoints in returned Match object. Default is to treat all input coordinates as waypoints.    |

\* Please note that even if alternative routes are requested, a result cannot be guaranteed.

**Response**

- `code` if the request was successful `Ok` otherwise see the service dependent and general status codes.
- `waypoints`: Array of `Waypoint` objects representing all waypoints in order:
- `routes`: An array of `Route` objects, ordered by descending recommendation rank.

In case of error the following `code`s are supported in addition to the general ones:

| Type              | Description     |
|-------------------|-----------------|
| `NoRoute`         | No route found. |

All other properties might be undefined.

#### Example Request

```curl
# Query on Berlin with three coordinates and no overview geometry returned:
curl 'http://metis.lti.cs.cmu.edu:5000/route/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?overview=false'
```

### Table service

Computes the duration of the fastest route between all pairs of supplied coordinates. Returns durations or distances or both between the coordinate pairs. Note that the distances are not the shortest distance between two coordinates, but rather the distances of the fastest routes. Durations are in seconds and distances are in meters.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/table/v1/test/{coordinates}?{sources}=[{elem}...];&{destinations}=[{elem}...]&annotations={duration|distance|duration,distance}
```

**Options**

In addition to the [general options](#general-options) the following options are supported for this service:

|Option      |Values                                            |Description                                  |
|------------|--------------------------------------------------|---------------------------------------------|
|sources     |`{index};{index}[;{index} ...]` or `all` (default)|Use location with given index as source.     |
|destinations|`{index};{index}[;{index} ...]` or `all` (default)|Use location with given index as destination.|
|annotations |`duration` (default), `distance`, or `duration,distance`|Return the requested table or tables in response. |
|fallback_speed|`double > 0`| If no route found between a source/destination pair, calculate the as-the-crow-flies distance, then use this speed to estimate duration.|
|fallback_coordinate|`input` (default), or `snapped`| When using a `fallback_speed`, use the user-supplied coordinate (`input`), or the snapped location (`snapped`) for calculating distances.|
|scale_factor|`double > 0`| Use in conjunction with `annotations=durations`. Scales the table `duration` values by this number.|

Unlike other array encoded options, the length of `sources` and `destinations` can be **smaller or equal**
to number of input locations;

With `skip_waypoints` set to `true`, both `sources` and `destinations` arrays will be skipped.

**Example:**

```
sources=0;5;7&destinations=5;1;4;2;3;6
```

|Element     |Values                       |
|------------|-----------------------------|
|index       |`0 <= integer < #locations`  |

#### Example Request

```curl
# Returns a 3x3 duration matrix:
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219'

# Returns a 1x3 duration matrix
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?sources=0'

# Returns a asymmetric 3x2 duration matrix with from the polyline encoded locations `qikdcB}~dpXkkHz`:
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/polyline(egs_Iq_aqAppHzbHulFzeMe`EuvKpnCglA)?sources=0;1;3&destinations=2;4'

# Returns a 3x3 duration matrix:
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?annotations=duration'

# Returns a 3x3 distance matrix for CH:
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?annotations=distance'

# Returns a 3x3 duration matrix and a 3x3 distance matrix for CH:
curl 'http://metis.lti.cs.cmu.edu:5000/table/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219?annotations=distance,duration'
```

**Response**

- `code` if the request was successful `Ok` otherwise see the service dependent and general status codes.
- `durations` array of arrays that stores the matrix in row-major order. `durations[i][j]` gives the travel time from
  the i-th source to the j-th destination. Values are given in seconds. Can be `null` if no route between `i` and `j` can be found.
- `distances` array of arrays that stores the matrix in row-major order. `distances[i][j]` gives the travel distance from
  the i-th source to the j-th destination. Values are given in meters. Can be `null` if no route between `i` and `j` can be found.
- `sources` array of `Waypoint` objects describing all sources in order
- `destinations` array of `Waypoint` objects describing all destinations in order
- `fallback_speed_cells` (optional) array of arrays containing `i,j` pairs indicating which cells contain estimated values based on `fallback_speed`.  Will be absent if `fallback_speed` is not used.

In case of error the following `code`s are supported in addition to the general ones:

| Type             | Description     |
|------------------|-----------------|
| `NoTable`        | No route found. |
| `NotImplemented`  | This request is not supported |

All other properties might be undefined.

#### Example Response

```json
{
  "sources": [
    {
      "location": [
        13.3888,
        52.517033
      ],
      "hint": "PAMAgEVJAoAUAAAAIAAAAAcAAAAAAAAArss0Qa7LNEHiVIRA4lSEQAoAAAAQAAAABAAAAAAAAADMAAAAAEzMAKlYIQM8TMwArVghAwEA3wps52D3",
      "name": "Friedrichstraße"
    },
    {
      "location": [
        13.397631,
        52.529432
      ],
      "hint": "WIQBgL6mAoAEAAAABgAAAAAAAAA7AAAAhU6PQHvHj0IAAAAAQbyYQgQAAAAGAAAAAAAAADsAAADMAAAAf27MABiJIQOCbswA_4ghAwAAXwVs52D3",
      "name": "Torstraße"
    },
    {
      "location": [
        13.428554,
        52.523239
      ],
      "hint": "7UcAgP___38fAAAAUQAAACYAAABTAAAAhSQKQrXq5kKRbiZCWJo_Qx8AAABRAAAAJgAAAFMAAADMAAAASufMAOdwIQNL58wA03AhAwMAvxBs52D3",
      "name": "Platz der Vereinten Nationen"
    }
  ],
  "durations": [
    [
      0,
      192.6,
      382.8
    ],
    [
      199,
      0,
      283.9
    ],
    [
      344.7,
      222.3,
      0
    ]
  ],
  "destinations": [
    {
      "location": [
        13.3888,
        52.517033
      ],
      "hint": "PAMAgEVJAoAUAAAAIAAAAAcAAAAAAAAArss0Qa7LNEHiVIRA4lSEQAoAAAAQAAAABAAAAAAAAADMAAAAAEzMAKlYIQM8TMwArVghAwEA3wps52D3",
      "name": "Friedrichstraße"
    },
    {
      "location": [
        13.397631,
        52.529432
      ],
      "hint": "WIQBgL6mAoAEAAAABgAAAAAAAAA7AAAAhU6PQHvHj0IAAAAAQbyYQgQAAAAGAAAAAAAAADsAAADMAAAAf27MABiJIQOCbswA_4ghAwAAXwVs52D3",
      "name": "Torstraße"
    },
    {
      "location": [
        13.428554,
        52.523239
      ],
      "hint": "7UcAgP___38fAAAAUQAAACYAAABTAAAAhSQKQrXq5kKRbiZCWJo_Qx8AAABRAAAAJgAAAFMAAADMAAAASufMAOdwIQNL58wA03AhAwMAvxBs52D3",
      "name": "Platz der Vereinten Nationen"
    }
  ],
  "code": "Ok",
  "distances": [
    [
      0,
      1886.89,
      3791.3
    ],
    [
      1824,
      0,
      2838.09
    ],
    [
      3275.36,
      2361.73,
      0
    ]
  ],
  "fallback_speed_cells": [
    [ 0, 1 ],
    [ 1, 0 ]
  ]
}
```


### Match service

Map matching matches/snaps given GPS points to the road network in the most plausible way.
Please note the request might result in multiple sub-traces. Large jumps in the timestamps (> 60s) or improbable transitions lead to trace splits if a complete matching could not be found.
The algorithm might not be able to match all points. Outliers are removed if they can not be matched successfully.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/match/v1/test/{coordinates}?steps={true|false}&geometries={polyline|polyline6|geojson}&overview={simplified|full|false}&annotations={true|false}
```

In addition to the [general options](#general-options) the following options are supported for this service:

|Option      |Values                                          |Description                                                                               |
|------------|------------------------------------------------|------------------------------------------------------------------------------------------|
|steps       |`true`, `false` (default)                       |Returned route steps for each route                                                       |
|geometries  |`polyline` (default), `polyline6`, `geojson`    |Returned route geometry format (influences overview and per step)                         |
|annotations |`true`, `false` (default), `nodes`, `distance`, `duration`, `datasources`, `weight`, `speed`  |Returns additional metadata for each coordinate along the route geometry.                 |
|overview    |`simplified` (default), `full`, `false`         |Add overview geometry either full, simplified according to highest zoom level it could be display on, or not at all.|
|timestamps  |`{timestamp};{timestamp}[;{timestamp} ...]`     |Timestamps for the input locations in seconds since UNIX epoch. Timestamps need to be monotonically increasing. |
|radiuses    |`{radius};{radius}[;{radius} ...]`              |Standard deviation of GPS precision used for map matching. If applicable use GPS accuracy.|
|gaps        |`split` (default), `ignore`                     |Allows the input track splitting based on huge timestamp gaps between points.             |
|tidy        |`true`, `false` (default)                       |Allows the input track modification to obtain better matching quality for noisy tracks.   |
|waypoints   | `{index};{index};{index}...`                   |Treats input coordinates indicated by given indices as waypoints in returned Match object. Default is to treat all input coordinates as waypoints.    |

|Parameter   |Values                             |
|------------|-----------------------------------|
|timestamp   |`integer` seconds since UNIX epoch |
|radius      |`double >= 0` (default 5m)         |

The radius for each point should be the standard error of the location measured in meters from the true location.
Use `Location.getAccuracy()` on Android or `CLLocation.horizontalAccuracy` on iOS.
This value is used to determine which points should be considered as candidates (larger radius means more candidates) and how likely each candidate is (larger radius means far-away candidates are penalized less).
The area to search is chosen such that the correct candidate should be considered 99.9% of the time.

**Response**

- `code` if the request was successful `Ok` otherwise see the service dependent and general status codes.
- `tracepoints`: Array of `Waypoint` objects representing all points of the trace in order.
  If the tracepoint was omitted by map matching because it is an outlier, the entry will be `null`.
  Each `Waypoint` object has the following additional properties:
  - `matchings_index`: Index to the `Route` object in `matchings` the sub-trace was matched to.
  - `waypoint_index`: Index of the waypoint inside the matched route.
  - `alternatives_count`: Number of probable alternative matchings for this tracepoint. A value of zero indicates that this point was matched unambiguously. Split the trace at these points for incremental map matching.
- `matchings`: An array of `Route` objects that assemble the trace. Each `Route` object has the following additional properties:
  - `confidence`: Confidence of the matching. `float` value between 0 and 1. 1 is very confident that the matching is correct.

In case of error the following `code`s are supported in addition to the general ones:

| Type              | Description         |
|-------------------|---------------------|
| `NoMatch`         | No matchings found. |

All other properties might be undefined.

### Trip service

The trip plugin solves the Traveling Salesman Problem using a greedy heuristic (farthest-insertion algorithm) for 10 or more waypoints and uses brute force for less than 10 waypoints.
The returned path does not have to be the fastest one. As TSP is NP-hard it only returns an approximation.
Note that all input coordinates have to be connected for the trip service to work.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/trip/v1/test/{coordinates}?roundtrip={true|false}&source{any|first}&destination{any|last}&steps={true|false}&geometries={polyline|polyline6|geojson}&overview={simplified|full|false}&annotations={true|false}'
```

In addition to the [general options](#general-options) the following options are supported for this service:

|Option      |Values                                          |Description                                                                |
|------------|------------------------------------------------|---------------------------------------------------------------------------|
|roundtrip   |`true` (default), `false`                       |Returned route is a roundtrip (route returns to first location)            |
|source      |`any` (default), `first`                        |Returned route starts at `any` or `first` coordinate                       |
|destination |`any` (default), `last`                         |Returned route ends at `any` or `last` coordinate                          |
|steps       |`true`, `false` (default)                       |Returned route instructions for each trip                                  |
|annotations |`true`, `false` (default), `nodes`, `distance`, `duration`, `datasources`, `weight`, `speed` |Returns additional metadata for each coordinate along the route geometry.  |
|geometries  |`polyline` (default), `polyline6`, `geojson`    |Returned route geometry format (influences overview and per step)          |
|overview    |`simplified` (default), `full`, `false`         |Add overview geometry either full, simplified according to highest zoom level it could be display on, or not at all.|

**Fixing Start and End Points**

It is possible to explicitly set the start or end coordinate of the trip.
When the source is set to `first`, the first coordinate is used as the start coordinate of the trip in the output. When the destination is set to `last`, the last coordinate will be used as the destination of the trip in the returned output. If you specify `any`, any of the coordinates can be used as the first or last coordinate in the output.

However, if `source=any&destination=any` the returned round-trip will still start at the first input coordinate by default.

Currently, not all combinations of `roundtrip`, `source`, and `destination` are supported.
Right now, the following combinations are possible:

| roundtrip | source | destination | supported |
| :-- | :-- | :-- | :-- |
| true | first | last | **yes** |
| true | first | any | **yes** |
| true | any | last | **yes** |
| true | any | any | **yes** |
| false | first | last | **yes** |
| false | first | any | **yes** |
| false | any | last | **yes** |
| false | any | any | no |

#### Example Requests

```curl
# Round trip in Berlin with three stops:
curl 'http://metis.lti.cs.cmu.edu:5000/trip/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219'
```

```curl
# Round trip in Berlin with four stops, starting at the first stop, ending at the last:
curl 'http://metis.lti.cs.cmu.edu:{profile}/trip/v1/test/13.388860,52.517037;13.397634,52.529407;13.428555,52.523219;13.418555,52.523215?source=first&destination=last'
```

#### Response

- `code`: if the request was successful `Ok` otherwise see the service dependent and general status codes.
- `waypoints`: Array of `Waypoint` objects representing all waypoints in input order. Each `Waypoint` object has the following additional properties:
  - `trips_index`: Index to `trips` of the sub-trip the point was matched to.
  - `waypoint_index`: Index of the point in the trip.
- `trips`: An array of `Route` objects that assemble the trace.

In case of error the following `code`s are supported in addition to the general ones:

| Type              | Description         |
|-------------------|---------------------|
| `NoTrips`         | No trips found because input coordinates are not connected.|
| `NotImplemented`  | This request is not supported |

All other properties might be undefined.

### Tile service

This service generates [Mapbox Vector Tiles](https://www.mapbox.com/developers/vector-tiles/) that can be viewed with a vector-tile capable slippy-map viewer.  The tiles contain road geometries and metadata that can be used to examine the routing graph.  The tiles are generated directly from the data in-memory, so are in sync with actual routing results, and let you examine which roads are actually routable, and what weights they have applied.

```endpoint
GET http://metis.lti.cs.cmu.edu:{profile}/tile/v1/test/tile({x},{y},{zoom}).mvt
```

The `x`, `y`, and `zoom` values are the same as described at https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames, and are supported by vector tile viewers like [Mapbox GL JS](https://www.mapbox.com/mapbox-gl-js/api/).

#### Example request

```curl
# This fetches a Z=13 tile for downtown San Francisco:
curl 'http://metis.lti.cs.cmu.edu:5000/tile/v1/test/tile(1310,3166,13).mvt'
```

#### Example response

The response object is either a binary encoded blob with a `Content-Type` of `application/x-protobuf`, or a `404` error.  Note that OSRM is hard-coded to only return tiles from zoom level 12 and higher (to avoid accidentally returning extremely large vector tiles).

Vector tiles contain two layers:

`speeds` layer:

| Property     | Type      | Description                              |
| ------------ | --------- | ---------------------------------------- |
| `speed`      | `integer` | the speed on that road segment, in km/h  |
| `is_small`   | `boolean` | whether this segment belongs to a small (< 1000 node) [strongly connected component](https://en.wikipedia.org/wiki/Strongly_connected_component) |
| `datasource` | `string`  | the source for the speed value (normally `lua profile` unless you're using the [traffic update feature](https://github.com/Project-OSRM/osrm-backend/wiki/Traffic), in which case it contains the stem of the filename that supplied the speed value for this segment |
| `duration`   | `float`   | how long this segment takes to traverse, in seconds.  This value is to calculate the total route ETA. |
| `weight  `   | `integer` | how long this segment takes to traverse, in units (may differ from `duration` when artificial biasing is applied in the Lua profiles).  ACTUAL ROUTING USES THIS VALUE. |
| `name`       | `string`  | the name of the road this segment belongs to |
| `rate`       | `float`   | the value of `length/weight` - analogous to `speed`, but using the `weight` value rather than `duration`, rounded to the nearest integer |
| `is_startpoint` | `boolean` | whether this segment can be used as a start/endpoint for routes |

`turns` layer:

| Property     | Type      | Description                              |
| ------------ | --------- | ---------------------------------------- |
| `bearing_in` | `integer` | the absolute bearing that approaches the intersection.  -180 to +180, 0 = North, 90 = East |
| `turn_angle` | `integer` | the angle of the turn, relative to the `bearing_in`.  -180 to +180, 0 = straight ahead, 90 = 90-degrees to the right |
| `cost`       | `float`   | the time we think it takes to make that turn, in seconds.  May be negative, depending on how the data model is constructed (some turns get a "bonus"). |
| `weight`     | `float`   | the weight we think it takes to make that turn.  May be negative, depending on how the data model is constructed (some turns get a "bonus"). ACTUAL ROUTING USES THIS VALUE |
| `type`       | `string`  | the type of this turn - values like `turn`, `continue`, etc.  See the `StepManeuver` for a partial list, this field also exposes internal turn types that are never returned with an API response |
| `modifier`   | `string`  | the direction modifier of the turn (`left`, `sharp left`, etc) |


## Result objects

### Route object

Represents a route through (potentially multiple) waypoints.

**Properties**

- `distance`: The distance traveled by the route, in `float` meters.
- `duration`: The estimated travel time, in `float` number of seconds.
- `geometry`: The whole geometry of the route value depending on `overview` parameter, format depending on the `geometries` parameter. See `RouteStep`'s `geometry` property for the parameter documentation.
- `weight`: The calculated weight of the route.
- `weight_name`: The name of the weight profile used during the extraction phase.

| overview   | Description                 |
|------------|-----------------------------|
| simplified | Geometry is simplified according to the highest zoom level it can still be displayed in full. |
| full       | Geometry is not simplified. |
| false      | Geometry is not added.      |

- `legs`: The legs between the given waypoints, an array of `RouteLeg` objects.

#### Example

Three input coordinates, `geometry=geojson`, `steps=false`:

```json
{
  "distance": 90.0,
  "duration": 300.0,
  "weight": 300.0,
  "weight_name": "duration",
  "geometry": {"type": "LineString", "coordinates": [[120.0, 10.0], [120.1, 10.0], [120.2, 10.0], [120.3, 10.0]]},
  "legs": [
    {
      "distance": 30.0,
      "duration": 100.0,
      "steps": []
    },
    {
      "distance": 60.0,
      "duration": 200.0,
      "steps": []
    }
  ]
}
```

### RouteLeg object

Represents a route between two waypoints.

**Properties**

- `distance`: The distance traveled by this route leg, in `float` meters.
- `duration`: The estimated travel time, in `float` number of seconds.
- `weight`: The calculated weight of the route leg.
- `summary`: Summary of the route taken as `string`. Depends on the `steps` parameter:

| steps |                                                                       |
|-------|-----------------------------------------------------------------------|
| true  | Names of the two major roads used. Can be empty if the route is too short.|
| false | empty `string`                                                        |

- `steps`: Depends on the `steps` parameter.

| steps        |                                                                       |
|--------------|-----------------------------------------------------------------------|
| true         | array of `RouteStep` objects describing the turn-by-turn instructions |
| false        | empty array                                                           |

- `annotation`: Additional details about each coordinate along with the route geometry:

| annotations  |                                                                               |
|--------------|-------------------------------------------------------------------------------|
| true         | An `Annotation` object containing node ids, durations, distances, and weights. |
| false        | `undefined`                                                                   |

#### Example

With `steps=false` and `annotations=true`:

```json
{
  "distance": 30.0,
  "duration": 100.0,
  "weight": 100.0,
  "steps": [],
  "annotation": {
    "distance": [5,5,10,5,5],
    "duration": [15,15,40,15,15],
    "datasources": [1,0,0,0,1],
    "metadata": { "datasource_names": ["traffic","lua profile","lua profile","lua profile","traffic"] },
    "nodes": [49772551,49772552,49786799,49786800,49786801,49786802],
    "speed": [0.3, 0.3, 0.3, 0.3, 0.3]
  }
}
```

### Annotation object

Annotation of the whole route leg with fine-grained information about each segment or node id.

**Properties**

- `distance`: The distance, in meters, between each pair of coordinates
- `duration`: The duration between each pair of coordinates, in seconds.  Does not include the duration of any turns.
- `datasources`: The index of the data source for the speed between each pair of coordinates. `0` is the default profile, other values are supplied via `--segment-speed-file` to `osrm-contract` or `osrm-customize`.  String-like names are in the `metadata.datasource_names` array.
- `nodes`: The OSM node ID for each coordinate along the route, excluding the first/last user-supplied coordinates
- `weight`: The weights between each pair of coordinates.  Does not include any turn costs.
- `speed`: Convenience field, calculation of `distance / duration` rounded to one decimal place
- `metadata`: Metadata related to other annotations
  - `datasource_names`: The names of the data sources used for the speed between each pair of coordinates.  `lua profile` is the default profile, other values are the filenames supplied via `--segment-speed-file` to `osrm-contract` or `osrm-customize`

#### Example

```json
{
  "distance": [5,5,10,5,5],
  "duration": [15,15,40,15,15],
  "datasources": [1,0,0,0,1],
  "metadata": { "datasource_names": ["traffic","lua profile","lua profile","lua profile","traffic"] },
  "nodes": [49772551,49772552,49786799,49786800,49786801,49786802],
  "weight": [15,15,40,15,15]
}
```


### RouteStep object

A step consists of a maneuver such as a turn or merge, followed
by a distance of travel along a single way to the subsequent
step.

**Properties**

- `distance`: The distance of travel from the maneuver to the subsequent step, in `float` meters.
- `duration`: The estimated travel time, in `float` number of seconds.
- `geometry`: The unsimplified geometry of the route segment, depending on the `geometries` parameter.
- `weight`: The calculated weight of the step.

| `geometry` |                                                                    |
|------------|--------------------------------------------------------------------|
| polyline   | [polyline](https://www.npmjs.com/package/polyline) with precision 5 in [latitude,longitude] encoding |
| polyline6  | [polyline](https://www.npmjs.com/package/polyline) with precision 6 in [latitude,longitude] encoding |
| geojson    | [GeoJSON `LineString`](http://geojson.org/geojson-spec.html#linestring) |

- `name`: The name of the way along which travel proceeds.
- `ref`: A reference number or code for the way. Optionally included, if ref data is available for the given way.
- `pronunciation`: A string containing an [IPA](https://en.wikipedia.org/wiki/International_Phonetic_Alphabet) phonetic transcription indicating how to pronounce the name in the `name` property. This property is omitted if pronunciation data is unavailable for the step.
- `destinations`: The destinations of the way. Will be `undefined` if there are no destinations.
- `exits`: The exit numbers or names of the way. Will be `undefined` if there are no exit numbers or names.
- `mode`: A string signifying the mode of transportation.
- `maneuver`: A `StepManeuver` object representing the maneuver.
- `intersections`: A list of `Intersection` objects that are passed along the segment, the very first belonging to the StepManeuver
- `rotary_name`: The name for the rotary. Optionally included, if the step is a rotary and a rotary name is available.
- `rotary_pronunciation`: The pronunciation hint of the rotary name. Optionally included, if the step is a rotary and a rotary pronunciation is available.
- `driving_side`: The legal driving side at the location for this step.  Either `left` or `right`.

#### Example

```json
{
   "geometry" : "{lu_IypwpAVrAvAdI",
   "mode" : "driving",
   "duration" : 15.6,
   "weight" : 15.6,
   "intersections" : [
      {  "bearings" : [ 10, 92, 184, 270 ],
         "lanes" : [
            { "indications" : [ "left", "straight" ],
               "valid" : false },
            { "valid" : true,
               "indications" : [ "right" ] }
         ],
         "out" : 2,
         "in" : 3,
         "entry" : [ "true", "true", "true", "false" ],
         "location" : [ 13.39677, 52.54366 ]
      },
      {  "out" : 1,
         "lanes" : [
            { "indications" : [ "straight" ],
               "valid" : true },
            { "indications" : [ "right" ],
               "valid" : false }
         ],
         "bearings" : [ 60, 240, 330 ],
         "in" : 0,
         "entry" : [ "false", "true", "true" ],
         "location" : [ 13.394718, 52.543096 ]
      }
   ],
   "name" : "Lortzingstraße",
   "distance" : 152.3,
   "maneuver" : {
      "modifier" : "right",
      "type" : "turn"
   }
}
```

### StepManeuver object

**Properties**

- `location`: A `[longitude, latitude]` pair describing the location of the turn.
- `bearing_before`: The clockwise angle from true north to the
  direction of travel immediately before the maneuver.  Range 0-359.
- `bearing_after`: The clockwise angle from true north to the
  direction of travel immediately after the maneuver.  Range 0-359.
- `type` A string indicating the type of maneuver. **new identifiers might be introduced without API change**
   Types unknown to the client should be handled like the `turn` type, the existence of correct `modifier` values is guaranteed.

| `type`           | Description                                                  |
|------------------|--------------------------------------------------------------|
| `turn`           | a basic turn into the direction of the `modifier`                |
| `new name`       | no turn is taken/possible, but the road name changes. The road can take a turn itself, following `modifier`.                  |
| `depart`         | indicates the departure of the leg                           |
| `arrive`         | indicates the destination of the leg                         |
| `merge`          | merge onto a street (e.g. getting on the highway from a ramp, the `modifier specifies the direction of the merge`) |
| `ramp`           | **Deprecated**. Replaced by `on_ramp` and `off_ramp`.        |
| `on ramp`        | take a ramp to enter a highway (direction given my `modifier`) |
| `off ramp`       | take a ramp to exit a highway (direction given my `modifier`)  |
| `fork`           | take the left/right side at a fork depending on `modifier`   |
| `end of road`    | road ends in a T intersection turn in direction of `modifier`|
| `use lane`       | **Deprecated** replaced by lanes on all intersection entries |
| `continue`       | Turn in direction of `modifier` to stay on the same road     |
| `roundabout`     | traverse roundabout, if the route leaves the roundabout there will be an additional property `exit` for exit counting. The modifier specifies the direction of entering the roundabout. |
| `rotary`         | a traffic circle. While very similar to a larger version of a roundabout, it does not necessarily follow roundabout rules for right of way. It can offer `rotary_name` and/or `rotary_pronunciation` parameters (located in the RouteStep object) in addition to the `exit` parameter (located on the StepManeuver object).  |
| `roundabout turn`| Describes a turn at a small roundabout that should be treated as a normal turn. The `modifier` indicates the turn direction. Example instruction: `At the roundabout turn left`. |
| `notification`   | not an actual turn but a change in the driving conditions. For example the travel mode or classes. If the road takes a turn itself, the `modifier` describes the direction |
| `exit roundabout`| Describes a maneuver exiting a roundabout (usually preceded by a `roundabout` instruction) |
| `exit rotary`    | Describes the maneuver exiting a rotary (large named roundabout) |

  Please note that even though there are `new name` and `notification` instructions, the `mode` and `name` can change
  between all instructions. They only offer a fallback in case nothing else is to report.

- `modifier` An optional `string` indicating the direction change of the maneuver.

| `modifier`        | Description                               |
|-------------------|-------------------------------------------|
| `uturn`           | indicates the reversal of direction          |
| `sharp right`     | a sharp right turn                        |
| `right`           | a normal turn to the right                |
| `slight right`    | a slight turn to the right                |
| `straight`        | no relevant change in direction           |
| `slight left`     | a slight turn to the left                 |
| `left`            | a normal turn to the left                 |
| `sharp left`      | a sharp turn to the left                  |

  The list of turns without a modifier is limited to: `depart/arrive`. If the source/target location is close enough to the `depart/arrive` location, no modifier will be given.

  The meaning depends on the `type` property.

| `type`                 | Description                                                                                                               |
|------------------------|---------------------------------------------------------------------------------------------------------------------------|
| `turn`                 | `modifier` indicates the change in direction accomplished through the turn                                                |
| `depart`/`arrive`      | `modifier` indicates the position of departure point and arrival point in relation to the current direction of travel      |

- `exit` An optional `integer` indicating the number of the exit to take. The property exists for the `roundabout` / `rotary` property:
  Number of the roundabout exit to take. If an exit is `undefined` the destination is on the roundabout.

### Lane object

A `Lane` represents a turn lane at the corresponding turn location.

**Properties**

- `indications`: an indication (e.g. marking on the road) specifying the turn lane. A road can have multiple indications (e.g. an arrow pointing straight and left). The indications are given in an array, each containing one of the following types. 

| `value`                | Description                                                                                                               |
|------------------------|---------------------------------------------------------------------------------------------------------------------------|
| `none`                 | No dedicated indication is shown.                                                                                         |
| `uturn`                | An indication signaling the possibility to reverse (i.e. fully bend arrow).                                               |
| `sharp right`          | An indication indicating a sharp right turn (i.e. strongly bend arrow).                                                   |
| `right`                | An indication indicating a right turn (i.e. bend arrow).                                                                  |
| `slight right`         | An indication indicating a slight right turn (i.e. slightly bend arrow).                                                  |
| `straight`             | No dedicated indication is shown (i.e. straight arrow).                                                                   |
| `slight left`          | An indication indicating a slight left turn (i.e. slightly bend arrow).                                                   |
| `left`                 | An indication indicating a left turn (i.e. bend arrow).                                                                   |
| `sharp left`           | An indication indicating a sharp left turn (i.e. strongly bend arrow).                                                    |

- `valid`: a boolean flag indicating whether the lane is a valid choice in the current maneuver

#### Example

```json
{
    "indications": ["left", "straight"],
    "valid": false
}
 ```

### Intersection object

An intersection gives a full representation of any cross-way the path passes by. For every step, the very first intersection (`intersections[0]`) corresponds to the
location of the StepManeuver. Further intersections are listed for every cross-way until the next turn instruction.

**Properties**

- `location`: A `[longitude, latitude]` pair describing the location of the turn.
- `bearings`: A list of bearing values (e.g. [0,90,180,270]) that are available at the intersection. The bearings describe all available roads at the intersection.  Values are between 0-359 (0=true north)
- `classes`: An array of strings signifying the classes (as specified in the profile) of the road exiting the intersection.
- `entry`: A list of entry flags, corresponding in a 1:1 relationship to the bearings. A value of `true` indicates that the respective road could be entered on a valid route.
  `false` indicates that the turn onto the respective road would violate a restriction.
- `in`: index into bearings/entry array. Used to calculate the bearing just before the turn. Namely, the clockwise angle from true north to the
  direction of travel immediately before the maneuver/passing the intersection. Bearings are given relative to the intersection. To get the bearing
  in the direction of driving, the bearing has to be rotated by a value of 180. The value is not supplied for `depart` maneuvers.
- `out`: index into the bearings/entry array. Used to extract the bearing just after the turn. Namely, The clockwise angle from true north to the
  direction of travel immediately after the maneuver/passing the intersection. The value is not supplied for `arrive` maneuvers.
- `lanes`: Array of `Lane` objects that denote the available turn lanes at the intersection. If no lane information is available for an intersection, the `lanes` property will not be present.

#### Example

```json
{
    "location":[13.394718,52.543096],
    "in":0,
    "out":2,
    "bearings":[60,150,240,330],
    "entry":["false","true","true","true"],
    "classes": ["toll", "restricted"],
    "lanes":{
        "indications": ["left", "straight"],
        "valid": false
    }
}
```

### Waypoint object

The object is used to describe the waypoint on a route.

**Properties**

- `name` Name of the street the coordinate snapped to
- `location` Array that contains the `[longitude, latitude]` pair of the snapped coordinate
- `distance` The distance, in meters, from the input coordinate to the snapped coordinate
- `hint` Unique internal identifier of the segment (ephemeral, not constant over data updates)
   This can be used on subsequent requests to significantly speed up the query and to connect multiple services.
   E.g. you can use the `hint` value obtained by the `nearest` query as `hint` values for `route` inputs.

#### Example

```json
{
   "hint" : "KSoKADRYroqUBAEAEAAAABkAAAAGAAAAAAAAABhnCQCLtwAA_0vMAKlYIQM8TMwArVghAwEAAQH1a66g",
   "distance" : 4.152629,
   "name" : "Friedrichstraße",
   "location" : [
      13.388799,
      52.517033
   ]
}
```

## Flatbuffers format

The default response format is `json`, but OSRM supports binary [`flatbuffers`](https://google.github.io/flatbuffers/) format, which
is much faster in serialization/deserialization, comparing to `json`.

The format itself is described in message descriptors, located at `include/engine/api/flatbuffers` directory. Those descriptors could
be compiled to provide protocol parsers in Go/Javascript/Typescript/Java/Dart/C#/Python/Lobster/Lua/Rust/PHP/Kotlin. Precompiled
protocol parser for C++ is supplied with OSRM.

`Flatbuffers` format provides exactly the same data, as `json` format with a slightly different layout, which was optimized to minimize
in-transfer size.

### Root object

Root object is the only object, available from a 'raw' `flatbuffers` buffer. It can be constructed with a following call:

         auto osrm = osrm::engine::api::fbresult::GetFBResult(some_input_buffer);

**Properties**

- `error`: `bool` Marks response as erroneous. An erroneous response should include the `code` fieldset, all the other fields may not be present.
- `code`: `Error` Error description object, only present, when `error` is `true`
- `waypoints`: `[Waypoint]` Array of `Waypoint` objects. Should present for every service call, unless `skip_waypoints` is set to `true`. Table service will put `sources` array here.
- `routes`: `[RouteObject]` Array of `RouteObject` objects. May be empty or absent. Should present for Route/Trip/Match services call.
- `table`: `Table` Table object, may absent. Should be present in case of Table service call.

### Error object

Contains error information.

**Properties**

- `code`: `string` Error code
- `message`: `string` Detailed error message

### Waypoint object

Almost the same as `json` Waypoint object. The following properties differ:

- `location`: `Position` Same as `json` location field, but different format.
- `nodes`: `Uint64Pair` Same as `json` nodes field, but different format.

### RouteObject object

Almost the same as `json` Route object. The following properties differ:

- `polyline`: `string` Same as `json` geometry.polyline or geometry.polyline6 fields. One field for both formats.
- `coordinates`: `[Position]` Same as `json` geometry.coordinates field, but different format.
- `legs`: `[Leg]` Array of `Leg` objects.

### Leg object

Almost the same as `json` Leg object. The following properties differ:

- `annotations`: `Annotation` Same as `json` annotation field, but different format.
- `steps`: `[Step]` Same as `step` annotation field, but different format.

### Step object

Almost the same as `json` Step object. The following properties differ:

- `polyline`: `string` Same as `json` geometry.polyline or geometry.polyline6 fields. One field for both formats.
- `coordinates`: `[Position]` Same as `json` geometry.coordinates field, but different format.
- `maneuver`: `StepManeuver` Same as `json` maneuver field, but different format.

| `type`           | Description                                                                                                                                                                                                                                                                                                                  |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Turn`           | a basic turn into the direction of the `modifier`                                                                                                                                                                                                                                                                                |
| `NewName`        | no turn is taken/possible, but the road name changes. The road can take a turn itself, following `modifier`.                                                                                                                                                                                                                 |
| `Depart`         | indicates the departure of the leg                                                                                                                                                                                                                                                                                           |
| `Arrive`         | indicates the destination of the leg                                                                                                                                                                                                                                                                                         |
| `Merge`          | merge onto a street (e.g. getting on the highway from a ramp, the `modifier specifies the direction of the merge`)                                                                                                                                                                                                           |
| `OnRamp`         | take a ramp to enter a highway (direction given my `modifier`)                                                                                                                                                                                                                                                               |
| `OffRamp`        | take a ramp to exit a highway (direction given my `modifier`)                                                                                                                                                                                                                                                                |
| `Fork`           | take the left/right side at a fork depending on `modifier`                                                                                                                                                                                                                                                                   |
| `EndOfRoad`      | road ends in a T intersection turn in direction of `modifier`                                                                                                                                                                                                                                                                |
| `Continue`       | Turn in direction of `modifier` to stay on the same road                                                                                                                                                                                                                                                                     |
| `Roundabout`     | traverse roundabout, if the route leaves the roundabout there will be an additional property `exit` for exit counting. The modifier specifies the direction of entering the roundabout.                                                                                                                                      |
| `Rotary`         | a traffic circle. While very similar to a larger version of a roundabout, it does not necessarily follow roundabout rules for right of way. It can offer `rotary_name` and/or `rotary_pronunciation` parameters (located in the RouteStep object) in addition to the `exit` parameter (located on the StepManeuver object).  |
| `RoundaboutTurn` | Describes a turn at a small roundabout that should be treated as a normal turn. The `modifier` indicates the turn direction. Example instruction: `At the roundabout turn left`.                                                                                                                                               |
| `Notification`   | not an actual turn but a change in the driving conditions. For example the travel mode or classes. If the road takes a turn itself, the `modifier` describes the direction                                                                                                                                                   |
| `ExitRoundabout` | Describes a maneuver exiting a roundabout (usually preceded by a `roundabout` instruction)                                                                                                                                                                                                                                  |
| `ExitRotary`     | Describes the maneuver exiting a rotary (large named roundabout)                                                                                                                                                                                                                                                             |

- `driving_side`: `bool` Ttrue stands for the left side driving.
- `intersections`: `[Intersection]` Same as `json` intersections field, but different format.

### Intersection object

Almost the same as `json` Intersection object. The following properties differ:

- `location`: `Position` Same as `json` location property, but in a different format.
- `lanes`: `[Lane]` Array of `Lane` objects.

### Lane object

Almost the same as `json` Lane object. The following properties differ:

- `indications`: `Turn` Array of `Turn` enum values.

| `value`                | Description                                                                                                               |
|------------------------|---------------------------------------------------------------------------------------------------------------------------|
| `None`                 | No dedicated indication is shown.                                                                                         |
| `UTurn`                | An indication signaling the possibility to reverse (i.e. fully bend arrow).                                               |
| `SharpRight`           | An indication indicating a sharp right turn (i.e. strongly bend arrow).                                                   |
| `Right`                | An indication indicating a right turn (i.e. bend arrow).                                                                  |
| `SlightRight`          | An indication indicating a slight right turn (i.e. slightly bend arrow).                                                  |
| `Straight`             | No dedicated indication is shown (i.e. straight arrow).                                                                   |
| `SlightLeft`           | An indication indicating a slight left turn (i.e. slightly bend arrow).                                                   |
| `Left`                 | An indication indicating a left turn (i.e. bend arrow).                                                                   |
| `SharpLeft`            | An indication indicating a sharp left turn (i.e. strongly bend arrow).                                                    |

### StepManeuver object

Almost the same as `json` StepManeuver object. The following properties differ:

- `location`: `Position` Same as `json` location property, but in a different format.
- `type`: `ManeuverType` Type of a maneuver (enum)

| `type`           | Description                                                  |
|------------------|--------------------------------------------------------------|
| `Turn`           | a basic turn into the direction of the `modifier`                |
| `NewName`        | no turn is taken/possible, but the road name changes. The road can take a turn itself, following `modifier`.                  |
| `Depart`         | indicates the departure of the leg                           |
| `Arrive`         | indicates the destination of the leg                         |
| `Merge`          | merge onto a street (e.g. getting on the highway from a ramp, the `modifier specifies the direction of the merge`) |
| `OnRamp`         | take a ramp to enter a highway (direction given my `modifier`) |
| `OffRamp`        | take a ramp to exit a highway (direction given my `modifier`)  |
| `Fork`           | take the left/right side at a fork depending on `modifier`   |
| `EndOfRoad`      | road ends in a T intersection turn in direction of `modifier`|
| `Continue`       | Turn in direction of `modifier` to stay on the same road     |
| `Roundabout`     | traverse roundabout, if the route leaves the roundabout there will be an additional property `exit` for exit counting. The modifier specifies the direction of entering the roundabout. |
| `Rotary`         | a traffic circle. While very similar to a larger version of a roundabout, it does not necessarily follow roundabout rules for right of way. It can offer `rotary_name` and/or `rotary_pronunciation` parameters (located in the RouteStep object) in addition to the `exit` parameter (located on the StepManeuver object).  |
| `RoundaboutTurn` | Describes a turn at a small roundabout that should be treated as a normal turn. The `modifier` indicates the turn direction. Example instruction: `At the roundabout turn left`. |
| `Notification`   | not an actual turn but a change in the driving conditions. For example the travel mode or classes. If the road takes a turn itself, the `modifier` describes the direction |
| `ExitRoundabout` | Describes a maneuver exiting a roundabout (usually preceded by a `roundabout` instruction) |
| `ExitRotary`    | Describes the maneuver exiting a rotary (large named roundabout) |

- `modifier`: `Turn` Maneuver turn (enum)

### Annotation object

Exactly the same as `json` annotation object.


### Position object

A point on Earth.

***Properties***
- `longitute`: `float` Point's longitude
- `latitude`: `float` Point's latitude

### Uint64Pair

A pair of long long integers. Used only by `Waypoint` object.

***Properties***
- `first`: `uint64` First pair value.
- `second`: `uint64` Second pair value.

### Table object

Almost the same as `json` Table object. The main difference is that 'sources' field is absent and the root's object 'waypoints' field is
used instead. All the other differences follow:

- `durations`: `[float]` Flat representation of a durations matrix. Element at row;col can be addressed as [row * cols + col]
- `distances`: `[float]` Flat representation of a destinations matrix. Element at row;col can be addressed as [row * cols + col]
- `destinations`: `[Waypoint]` Array of `Waypoint` objects. Will be `null` if `skip_waypoints` will be set to `true`
- `rows`: `ushort` Number of rows in durations/destinations matrices.
- `cols`: `ushort` Number of cols in durations/destinations matrices.

Below is all the documentation on how to use the http://metis.lti.cs.cmu.edu:8085/ endpoints.
## Search queries

The search API allows you to look up a location from a textual description
or address. This API supports structured and free-form search queries.

### Endpoint

The search API has the following format:

```
http://metis.lti.cs.cmu.edu:8085/search?<params>
```

The query term can be given in two different forms: free-form or structured.

### Free-form query

| Parameter | Value |
|-----------| ----- |
| q         | Free-form query string to search for |

In this form, the query can be unstructured.
Free-form queries are processed first left-to-right and then right-to-left if that fails. So you may search for
[pilkington avenue, birmingham](http://metis.lti.cs.cmu.edu:8085/search?q=pilkington+avenue,birmingham) as well as for
[birmingham, pilkington avenue](http://metis.lti.cs.cmu.edu:8085/search?q=birmingham,+pilkington+avenue).
Commas are optional, but improve performance by reducing the complexity of the search.

The free-form may also contain special phrases to describe the type of
place to be returned or a coordinate to search close to a position.

### Structured query

| Parameter  | Value |
|----------- | ----- |
| amenity    | name and/or type of POI |
| street     | housenumber and streetname |
| city       | city |
| county     | county |
| state      | state |
| country    | country |
| postalcode | postal code |

The structured form of the search query allows to lookup up an address
that is already split into its components. Each parameter represents a field
of the address. All parameters are optional. You should only use the ones
that are relevant for the address you want to geocode.

!!! Attention
    Cannot be combined with the `q=<query>` parameter. Newer versions of
    the API will return an error if you do so. Older versions simply return
    unexpected results.

### Parameters

The following parameters can be used to further restrict the search and
change the output. They are usable for both forms of the search query.

#### Output format

| Parameter | Value | Default |
|-----------| ----- | ------- |
| format    | one of: `xml`, `json`, `jsonv2`, `geojson`, `geocodejson` | `jsonv2` |


| Parameter | Value | Default |
|-----------| ----- | ------- |
| json_callback | function name | _unset_ |

When given, then JSON output will be wrapped in a callback function with
the given name. See [JSONP](https://en.wikipedia.org/wiki/JSONP) for more
information.

Only has an effect for JSON output formats.

| Parameter | Value | Default |
|-----------| ----- | ------- |
| limit     | number | 10 |

Limit the maximum number of returned results. Cannot be more than 40.
The endpoint may decide to return less results than given, if additional
results do not sufficiently match the query.


#### Output details

| Parameter | Value | Default |
|-----------| ----- | ------- |
| addressdetails | 0 or 1 | 0 |

When set to 1, include a breakdown of the address into elements.
The exact content of the address breakdown depends on the output format.

!!! tip
    If you are interested in a stable classification of address categories
    (suburb, city, state, etc), have a look at the `geocodejson` format.
    All other formats return classifications according to OSM tagging.
    There is a much larger set of categories and they are not always consistent,
    which makes them very hard to work with.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| extratags | 0 or 1 | 0 |

When set to 1, the response include any additional information in the result
that is available in the database, e.g. wikipedia link, opening hours.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| namedetails | 0 or 1 | 0 |

When set to 1, include a full list of names for the result. These may include
language variants, older names, references and brand.


#### Language of results

| Parameter | Value | Default |
|-----------| ----- | ------- |
| accept-language | browser language string | content of "Accept-Language" HTTP header |

Preferred language order for showing search results. This may either be
a simple comma-separated list of language codes or have the same format
as the ["Accept-Language" HTTP header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language).

#### Result restriction

There are two ways to influence the results. *Filters* exclude certain
kinds of results completely. *Boost parameters* only change the order of the
results and thus give a preference to some results over others.

| Parameter | Value | Default |
|-----------| ----- | ------- |
| countrycodes | comma-separated list of country codes | _unset_ |

Filter that limits the search results to one or more countries.
The country code must be the
[ISO 3166-1alpha2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) code
of the country, e.g. `gb` for the United Kingdom, `de` for Germany.

Each place is assigned to one country code based
on OSM country boundaries. In rare cases a place may not be in any country
at all, for example, when it is in international waters. These places are
also excluded when the filter is set.

!!! Note
    This parameter should not be confused with the 'country' parameter of
    the structured query. The 'country' parameter contains a search term
    and will be handled with some fuzziness. The `countrycodes` parameter
    is a hard filter and as such should be preferred. Having both parameters
    in the same query will work. If the parameters contradict each other,
    the search will come up empty.

| Parameter | Value | Default |
|-----------| ----- | ------- |
| layer     | comma-separated list of: `address`, `poi`, `railway`, `natural`, `manmade` | _unset_ (no restriction) |

The layer filter allows to select places by themes.

The `address` layer contains all places that make up an address:
address points with house numbers, streets, inhabited places (suburbs, villages,
cities, states tec.) and administrative boundaries.

The `poi` layer selects all point of interest. This includes classic POIs like
restaurants, shops, hotels but also less obvious features like recycling bins,
guideposts or benches.

The `railway` layer includes railway infrastructure like tracks.
Note that only very few railway
features are imported into the database.

The `natural` layer collects features like rivers, lakes and mountains while
the `manmade` layer functions as a catch-all for features not covered by the
other layers.

| Parameter | Value | Default |
|-----------| ----- | ------- |
| featureType | one of: `country`, `state`, `city`, `settlement` | _unset_ |

The featureType allows to have a more fine-grained selection for places
from the address layer. Results can be restricted to places that make up
the 'state', 'country' or 'city' part of an address. A featureType of
settlement selects any human inhabited feature from 'state' down to
'neighbourhood'.

When featureType is set, then results are automatically restricted
to the address layer (see above).

!!! tip
    Instead of using the featureType filters `country`, `state` or `city`,
    you can also use a structured query without the finer-grained parameters
    amenity or street.

| Parameter | Value | Default |
|-----------| ----- | ------- |
| exclude_place_ids | comma-separated list of place ids |

If you do not want certain OSM objects to appear in the search
result, give a comma separated list of the `place_id`s you want to skip.
This can be used to retrieve additional search results. For example, if a
previous query only returned a few results, then including those here would
cause the search to return other, less accurate, matches (if possible).

| Parameter | Value | Default |
|-----------| ----- | ------- |
| viewbox   | `<x1>,<y1>,<x2>,<y2>` | _unset_ |

Boost parameter which focuses the search on the given area.
Any two corner points of the box are accepted as long as they make a proper
box. `x` is longitude, `y` is latitude.

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| bounded   | 0 or 1 | 0       |

When set to 1, then it turns the 'viewbox' parameter (see above) into
a filter parameter, excluding any results outside the viewbox.

When `bounded=1` is given and the viewbox is small enough, then an amenity-only
search is allowed. Give the special keyword for the amenity in square
brackets, e.g. `[pub]` and a selection of objects of this type is returned.
There is no guarantee that the result returns all objects in the area.


#### Polygon output

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_geojson | 0 or 1 | 0 |
| polygon_kml     | 0 or 1 | 0 |
| polygon_svg     | 0 or 1 | 0 |
| polygon_text    | 0 or 1 | 0 |

Add the full geometry of the place to the result output. Output formats
in GeoJSON, KML, SVG or WKT are supported. Only one of these
options can be used at a time.

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_threshold | floating-point number | 0.0 |

When one of the polygon_* outputs is chosen, return a simplified version
of the output geometry. The parameter describes the
tolerance in degrees with which the geometry may differ from the original
geometry. Topology is preserved in the geometry.

### Examples

#### JSON with SVG polygon

For example, `http://metis.lti.cs.cmu.edu:8085/search?q=Unter%20den%20Linden%201%20Berlin&format=json&addressdetails=1&limit=1&polygon_svg=1`:

```json
[
  {
    "address": {
      "ISO3166-2-lvl4": "DE-BE",
      "borough": "Mitte",
      "city": "Berlin",
      "country": "Deutschland",
      "country_code": "de",
      "historic": "Kommandantenhaus",
      "house_number": "1",
      "neighbourhood": "Friedrichswerder",
      "postcode": "10117",
      "road": "Unter den Linden",
      "suburb": "Mitte"
    },
    "boundingbox": [
      "52.5170798",
      "52.5173311",
      "13.3975116",
      "13.3981577"
    ],
    "class": "historic",
    "display_name": "Kommandantenhaus, 1, Unter den Linden, Friedrichswerder, Mitte, Berlin, 10117, Deutschland",
    "importance": 0.8135042058306902,
    "lat": "52.51720765",
    "licence": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
    "lon": "13.397834399325466",
    "osm_id": 15976890,
    "osm_type": "way",
    "place_id": 108681845,
    "svg": "M 13.3975116 -52.5172905 L 13.397549 -52.5170798 13.397715 -52.5170906 13.3977122 -52.5171064 13.3977392 -52.5171086 13.3977417 -52.5170924 13.3979655 -52.5171069 13.3979623 -52.5171233 13.3979893 -52.5171248 13.3979922 -52.5171093 13.3981577 -52.5171203 13.398121 -52.5173311 13.3978115 -52.5173103 Z",
    "type": "house"
  }
]
```

#### XML with KML polygon

For example, `http://metis.lti.cs.cmu.edu:8085/search?q=135+pilkington+avenue,+birmingham&format=xml&polygon_kml=1&addressdetails=1`:

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<searchresults timestamp="Tue, 08 Aug 2023 15:45:41 +00:00"
               attribution="Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright"
               querystring="135 pilkington avenue, birmingham"
               more_url="http://metis.lti.cs.cmu.edu:8085/search?q=135+pilkington+avenue%2C+birmingham&amp;polygon_kml=1&amp;addressdetails=1&amp;limit=20&amp;exclude_place_ids=125279639&amp;format=xml"
               exclude_place_ids="125279639">
  <place place_id="125279639"
         osm_type="way"
         osm_id="90394480"
         lat="52.5487921"
         lon="-1.8164308"
         boundingbox="52.5487473,52.5488481,-1.8165130,-1.8163464"
         place_rank="30"
         address_rank="30"
         display_name="135, Pilkington Avenue, Maney, Sutton Coldfield, Wylde Green, Birmingham, West Midlands Combined Authority, England, B72 1LH, United Kingdom"
         class="building"
         type="residential"
         importance="9.999999994736442e-08">
    <geokml>
      <Polygon>
        <outerBoundaryIs>
          <LinearRing>
            <coordinates>-1.816513,52.5487566 -1.816434,52.5487473 -1.816429,52.5487629 -1.8163717,52.5487561 -1.8163464,52.5488346 -1.8164599,52.5488481 -1.8164685,52.5488213 -1.8164913,52.548824 -1.816513,52.5487566</coordinates>
          </LinearRing>
        </outerBoundaryIs>
      </Polygon>
    </geokml>
    <house_number>135</house_number>
    <road>Pilkington Avenue</road>
    <hamlet>Maney</hamlet>
    <town>Sutton Coldfield</town>
    <village>Wylde Green</village>
    <city>Birmingham</city>
    <ISO3166-2-lvl8>GB-BIR</ISO3166-2-lvl8>
    <state_district>West Midlands Combined Authority</state_district>
    <state>England</state>
    <ISO3166-2-lvl4>GB-ENG</ISO3166-2-lvl4>
    <postcode>B72 1LH</postcode>
    <country>United Kingdom</country>
    <country_code>gb</country_code>
  </place>
</searchresults>
```

#### JSON with address details

For example, `http://metis.lti.cs.cmu.edu:8085/search?addressdetails=1&q=bakery+in+berlin+wedding&format=jsonv2&limit=1`:

```json
[
  {
    "address": {
      "ISO3166-2-lvl4": "DE-BE",
      "borough": "Mitte",
      "city": "Berlin",
      "country": "Deutschland",
      "country_code": "de",
      "neighbourhood": "Sprengelkiez",
      "postcode": "13347",
      "road": "Lindower Straße",
      "shop": "Ditsch",
      "suburb": "Wedding"
    },
    "addresstype": "shop",
    "boundingbox": [
      "52.5427201",
      "52.5427654",
      "13.3668619",
      "13.3669442"
    ],
    "category": "shop",
    "display_name": "Ditsch, Lindower Straße, Sprengelkiez, Wedding, Mitte, Berlin, 13347, Deutschland",
    "importance": 9.99999999995449e-06,
    "lat": "52.54274275",
    "licence": "Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright",
    "lon": "13.36690305710228",
    "name": "Ditsch",
    "osm_id": 437595031,
    "osm_type": "way",
    "place_id": 204751033,
    "place_rank": 30,
    "type": "bakery"
  }
]
```

#### GeoJSON

For example, `http://metis.lti.cs.cmu.edu:8085/search?q=17+Strada+Pictor+Alexandru+Romano%2C+Bukarest&format=geojson`:

```json
{
  "type": "FeatureCollection",
  "licence": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "place_id": "35811445",
        "osm_type": "node",
        "osm_id": "2846295644",
        "display_name": "17, Strada Pictor Alexandru Romano, Bukarest, Bucharest, Sector 2, Bucharest, 023964, Romania",
        "place_rank": "30",
        "category": "place",
        "type": "house",
        "importance": 0.62025
      },
      "bbox": [
        26.1156689,
        44.4354754,
        26.1157689,
        44.4355754
      ],
      "geometry": {
        "type": "Point",
        "coordinates": [
          26.1157189,
          44.4355254
        ]
      }
    }
  ]
}
```

#### GeocodeJSON

For example, `http://metis.lti.cs.cmu.edu:8085/search?q=%CE%91%CE%B3%CE%AF%CE%B1+%CE%A4%CF%81%CE%B9%CE%AC%CE%B4%CE%B1%2C+%CE%91%CE%B4%CF%89%CE%BD%CE%B9%CE%B4%CE%BF%CF%82%2C+Athens%2C+Greece&format=geocodejson`:

```json
{
  "type": "FeatureCollection",
  "geocoding": {
    "version": "0.1.0",
    "attribution": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
    "licence": "ODbL",
    "query": "Αγία Τριάδα, Αδωνιδος, Athens, Greece"
  },
  "features": [
    {
      "type": "Feature",
      "properties": {
        "geocoding": {
          "type": "place_of_worship",
          "label": "Αγία Τριάδα, Αδωνιδος, Άγιος Νικόλαος, 5º Δημοτικό Διαμέρισμα Αθηνών, Athens, Municipality of Athens, Regional Unit of Central Athens, Region of Attica, Attica, 11472, Greece",
          "name": "Αγία Τριάδα",
          "admin": null
        }
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          23.72949633941,
          38.0051697
        ]
      }
    }
  ]
}
```
## Address lookup

The lookup API allows to query the address and other details of one or
multiple OSM objects like node, way or relation.

### Endpoint

The lookup API has the following format:

```
http://metis.lti.cs.cmu.edu:8085/lookup?osm_ids=[N|W|R]<value>,…,…,&<params>
```

`osm_ids` is mandatory and must contain a comma-separated list of OSM ids each
prefixed with its type, one of node(N), way(W) or relation(R). Up to 50 ids
can be queried at the same time.

### Parameters

This section lists additional optional parameters.

#### Output format

| Parameter | Value | Default |
|-----------| ----- | ------- |
| format    | one of: `xml`, `json`, `jsonv2`, `geojson`, `geocodejson` | `jsonv2` |


| Parameter | Value | Default |
|-----------| ----- | ------- |
| json_callback | function name | _unset_ |

When given, then JSON output will be wrapped in a callback function with
the given name. See [JSONP](https://en.wikipedia.org/wiki/JSONP) for more
information.

Only has an effect for JSON output formats.


#### Output details

| Parameter | Value | Default |
|-----------| ----- | ------- |
| addressdetails | 0 or 1 | 0 |

When set to 1, include a breakdown of the address into elements.
The exact content of the address breakdown depends on the output format.

!!! tip
    If you are interested in a stable classification of address categories
    (suburb, city, state, etc), have a look at the `geocodejson` format.
    All other formats return classifications according to OSM tagging.
    There is a much larger set of categories and they are not always consistent,
    which makes them very hard to work with.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| extratags | 0 or 1 | 0 |

When set to 1, the response include any additional information in the result
that is available in the database, e.g. wikipedia link, opening hours.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| namedetails | 0 or 1 | 0 |

When set to 1, include a full list of names for the result. These may include
language variants, older names, references and brand.


#### Language of results

| Parameter | Value | Default |
|-----------| ----- | ------- |
| accept-language | browser language string | content of "Accept-Language" HTTP header |

Preferred language order for showing search results. This may either be
a simple comma-separated list of language codes or have the same format
as the ["Accept-Language" HTTP header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language).


#### Polygon output

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_geojson | 0 or 1 | 0 |
| polygon_kml     | 0 or 1 | 0 |
| polygon_svg     | 0 or 1 | 0 |
| polygon_text    | 0 or 1 | 0 |

Add the full geometry of the place to the result output. Output formats
in GeoJSON, KML, SVG or WKT are supported. Only one of these
options can be used at a time.

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_threshold | floating-point number | 0.0 |

When one of the polygon_* outputs is chosen, return a simplified version
of the output geometry. The parameter describes the
tolerance in degrees with which the geometry may differ from the original
geometry. Topology is preserved in the geometry.


### Examples

#### JSON with extratags

For example, `http://metis.lti.cs.cmu.edu:8085/lookup?osm_ids=W50637691&format=json&extratags=1`

```json
[
   {
      "place_id": 115462561,
      "licence": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
      "osm_type": "way",
      "osm_id": 50637691,
      "boundingbox": [
        "52.3994612",
        "52.3996426",
        "13.0479574",
        "13.0481754"
      ],
      "lat": "52.399550700000006",
      "lon": "13.048066846939687",
      "display_name": "Brandenburger Tor, Brandenburger Straße, Historische Innenstadt, Innenstadt, Potsdam, Brandenburg, 14467, Germany",
      "class": "tourism",
      "type": "attraction",
      "importance": 0.2940287400552381,
      "address": {
        "tourism": "Brandenburger Tor",
        "road": "Brandenburger Straße",
        "suburb": "Historische Innenstadt",
        "city": "Potsdam",
        "state": "Brandenburg",
        "postcode": "14467",
        "country": "Germany",
        "country_code": "de"
      },
      "extratags": {
        "image": "http://commons.wikimedia.org/wiki/File:Potsdam_brandenburger_tor.jpg",
        "heritage": "4",
        "wikidata": "Q695045",
        "architect": "Carl von Gontard;Georg Christian Unger",
        "wikipedia": "de:Brandenburger Tor (Potsdam)",
        "wheelchair": "yes",
        "description": "Kleines Brandenburger Tor in Potsdam",
        "heritage:website": "http://www.bldam-brandenburg.de/images/stories/PDF/DML%202012/04-p-internet-13.pdf",
        "heritage:operator": "bldam",
        "architect:wikidata": "Q68768;Q95223",
        "year_of_construction": "1771"
      }
   }
]
```

#### XML

For example, `http://metis.lti.cs.cmu.edu:8085/lookup?osm_ids=R146656,W50637691,N240109189`

```xml
  <lookupresults timestamp="Mon, 28 Mar 22 14:38:54 +0000" attribution="Data &#xA9; OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright" querystring="R146656,W50637691,N240109189" more_url="">
    <place place_id="282236157" osm_type="relation" osm_id="146656" place_rank="16" address_rank="16" boundingbox="53.3401044,53.5445923,-2.3199185,-2.1468288" lat="53.44246175" lon="-2.2324547359718547" display_name="Manchester, Greater Manchester, North West England, England, United Kingdom" class="boundary" type="administrative" importance="0.35">
      <city>Manchester</city>
      <county>Greater Manchester</county>
      <state_district>North West England</state_district>
      <state>England</state>
      <country>United Kingdom</country>
      <country_code>gb</country_code>
    </place>
    <place place_id="115462561" osm_type="way" osm_id="50637691" place_rank="30" address_rank="30" boundingbox="52.3994612,52.3996426,13.0479574,13.0481754" lat="52.399550700000006" lon="13.048066846939687" display_name="Brandenburger Tor, Brandenburger Stra&#xDF;e, Historische Innenstadt, Innenstadt, Potsdam, Brandenburg, 14467, Germany" class="tourism" type="attraction" importance="0.29402874005524">
      <tourism>Brandenburger Tor</tourism>
      <road>Brandenburger Stra&#xDF;e</road>
      <suburb>Historische Innenstadt</suburb>
      <city>Potsdam</city>
      <state>Brandenburg</state>
      <postcode>14467</postcode>
      <country>Germany</country>
      <country_code>de</country_code>
    </place>
    <place place_id="567505" osm_type="node" osm_id="240109189" place_rank="15" address_rank="16" boundingbox="52.3586925,52.6786925,13.2396024,13.5596024" lat="52.5186925" lon="13.3996024" display_name="Berlin, 10178, Germany" class="place" type="city" importance="0.78753902824914">
      <city>Berlin</city>
      <state>Berlin</state>
      <postcode>10178</postcode>
      <country>Germany</country>
      <country_code>de</country_code>
    </place>
  </lookupresults>
```
## Reverse Geocoding

Reverse geocoding generates an address from a coordinate given as
latitude and longitude.

### How it works

The reverse geocoding API does not exactly compute the address for the
coordinate it receives. It works by finding the closest suitable OSM object
and returning its address information. This may occasionally lead to
unexpected results.

First of all, this API only includes OSM objects in
its index that are suitable for searching. Small, unnamed paths for example
are missing from the database and can therefore not be used for reverse
geocoding either.

The other issue to be aware of is that the closest OSM object may not always
have a similar enough address to the coordinate you were requesting. For
example, in dense city areas it may belong to a completely different street.

### Endpoint

The main format of the reverse API is

```
http://metis.lti.cs.cmu.edu:8085/reverse?lat=<value>&lon=<value>&<params>
```

where `lat` and `lon` are latitude and longitude of a coordinate in WGS84
projection. The API returns exactly one result or an error when the coordinate
is in an area with no OSM data coverage.

### Parameters

This section lists additional parameters to further influence the output.

#### Output format

| Parameter | Value | Default |
|-----------| ----- | ------- |
| format    | one of: `xml`, `json`, `jsonv2`, `geojson`, `geocodejson` | `xml` |

See [Place Output Formats](Output.md) for details on each format.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| json_callback | function name | _unset_ |

When given, then JSON output will be wrapped in a callback function with
the given name. See [JSONP](https://en.wikipedia.org/wiki/JSONP) for more
information.

Only has an effect for JSON output formats.


#### Output details

| Parameter | Value | Default |
|-----------| ----- | ------- |
| addressdetails | 0 or 1 | 1 |

When set to 1, include a breakdown of the address into elements.
The exact content of the address breakdown depends on the output format.

!!! tip
    If you are interested in a stable classification of address categories
    (suburb, city, state, etc), have a look at the `geocodejson` format.
    All other formats return classifications according to OSM tagging.
    There is a much larger set of categories and they are not always consistent,
    which makes them very hard to work with.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| extratags | 0 or 1 | 0 |

When set to 1, the response include any additional information in the result
that is available in the database, e.g. wikipedia link, opening hours.


| Parameter | Value | Default |
|-----------| ----- | ------- |
| namedetails | 0 or 1 | 0 |

When set to 1, include a full list of names for the result. These may include
language variants, older names, references and brand.


#### Language of results

| Parameter | Value | Default |
|-----------| ----- | ------- |
| accept-language | browser language string | content of "Accept-Language" HTTP header |

Preferred language order for showing search results. This may either be
a simple comma-separated list of language codes or have the same format
as the ["Accept-Language" HTTP header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language).

!!! tip
    First-time users tend to be confused that they get different
    results when using in the browser versus in a command-line tool
    like wget or curl. The command-line tools
    usually don't send any Accept-Language header, prompting
    to show results in the local language. Browsers on the contrary always
    send the currently chosen browser language.


#### Result restriction

| Parameter | Value | Default |
|-----------| ----- | ------- |
| zoom      | 0-18  | 18      |

Level of detail required for the address. This is a number that
corresponds roughly to the zoom level used in XYZ tile sources in frameworks
like Leaflet.js, Openlayers etc.
In terms of address details the zoom levels are as follows:

 zoom | address detail
 -----|---------------
  3   | country
  5   | state
  8   | county
  10  | city
  12  | town / borough
  13  | village / suburb
  14  | neighbourhood
  15  | any settlement
  16  | major streets
  17  | major and minor streets
  18  | building


| Parameter | Value | Default |
|-----------| ----- | ------- |
| layer     | comma-separated list of: `address`, `poi`, `railway`, `natural`, `manmade` | _unset_ (no restriction) |


The layer filter allows to select places by themes.

The `address` layer contains all places that make up an address:
address points with house numbers, streets, inhabited places (suburbs, villages,
cities, states etc.) and administrative boundaries.

The `poi` layer selects all point of interest. This includes classic points
of interest like restaurants, shops, hotels but also less obvious features
like recycling bins, guideposts or benches.

The `railway` layer includes railway infrastructure like tracks.
Note that only very few railway
features are imported into the database.

The `natural` layer collects features like rivers, lakes and mountains while
the `manmade` layer functions as a catch-all for features not covered by the
other layers.


#### Polygon output

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_geojson | 0 or 1 | 0 |
| polygon_kml     | 0 or 1 | 0 |
| polygon_svg     | 0 or 1 | 0 |
| polygon_text    | 0 or 1 | 0 |

Add the full geometry of the place to the result output. Output formats
in GeoJSON, KML, SVG or WKT are supported. Only one of these
options can be used at a time.

| Parameter | Value  | Default |
|-----------| -----  | ------- |
| polygon_threshold | floating-point number | 0.0 |

When one of the polygon_* outputs is chosen, return a simplified version
of the output geometry. The parameter describes the
tolerance in degrees with which the geometry may differ from the original
geometry. Topology is preserved in the geometry.


### Examples

For example, `http://metis.lti.cs.cmu.edu:8085/reverse?format=xml&lat=52.5487429714954&lon=-1.81602098644987&zoom=18&addressdetails=1`

```xml
  <reversegeocode timestamp="Fri, 06 Nov 09 16:33:54 +0000" querystring="...">
    <result place_id="1620612" osm_type="node" osm_id="452010817">
      135, Pilkington Avenue, Wylde Green, City of Birmingham, West Midlands (county), B72, United Kingdom
    </result>
    <addressparts>
      <house_number>135</house_number>
      <road>Pilkington Avenue</road>
      <village>Wylde Green</village>
      <town>Sutton Coldfield</town>
      <city>City of Birmingham</city>
      <county>West Midlands (county)</county>
      <postcode>B72</postcode>
      <country>United Kingdom</country>
      <country_code>gb</country_code>
    </addressparts>
  </reversegeocode>
```

#### Example with `format=jsonv2`

For example, `http://metis.lti.cs.cmu.edu:8085/reverse?format=jsonv2&lat=-34.44076&lon=-58.70521`

```json
{
  "place_id":"134140761",
  "licence":"Data © OpenStreetMap contributors, ODbL 1.0. https:\/\/www.openstreetmap.org\/copyright",
  "osm_type":"way",
  "osm_id":"280940520",
  "lat":"-34.4391708",
  "lon":"-58.7064573",
  "place_rank":"26",
  "category":"highway",
  "type":"motorway",
  "importance":"0.1",
  "addresstype":"road",
  "display_name":"Autopista Pedro Eugenio Aramburu, El Triángulo, Partido de Malvinas Argentinas, Buenos Aires, 1.619, Argentina",
  "name":"Autopista Pedro Eugenio Aramburu",
  "address":{
    "road":"Autopista Pedro Eugenio Aramburu",
    "village":"El Triángulo",
    "state_district":"Partido de Malvinas Argentinas",
    "state":"Buenos Aires",
    "postcode":"1.619",
    "country":"Argentina",
    "country_code":"ar"
  },
  "boundingbox":["-34.44159","-34.4370994","-58.7086067","-58.7044712"]
}
```

#### Example with `format=geojson`

For example, `http://metis.lti.cs.cmu.edu:8085/reverse?format=geojson&lat=44.50155&lon=11.33989`

```json
{
  "type": "FeatureCollection",
  "licence": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "place_id": "18512203",
        "osm_type": "node",
        "osm_id": "1704756187",
        "place_rank": "30",
        "category": "place",
        "type": "house",
        "importance": "0",
        "addresstype": "place",
        "name": null,
        "display_name": "71, Via Guglielmo Marconi, Saragozza-Porto, Bologna, BO, Emilia-Romagna, 40122, Italy",
        "address": {
          "house_number": "71",
          "road": "Via Guglielmo Marconi",
          "suburb": "Saragozza-Porto",
          "city": "Bologna",
          "county": "BO",
          "state": "Emilia-Romagna",
          "postcode": "40122",
          "country": "Italy",
          "country_code": "it"
        }
      },
      "bbox": [
        11.3397676,
        44.5014307,
        11.3399676,
        44.5016307
      ],
      "geometry": {
        "type": "Point",
        "coordinates": [
          11.3398676,
          44.5015307
        ]
      }
    }
  ]
}
```

#### Example with `format=geocodejson`

For example, `http://metis.lti.cs.cmu.edu:8085/reverse?format=geocodejson&lat=60.2299&lon=11.1663`:

```json
{
  "type": "FeatureCollection",
  "geocoding": {
    "version": "0.1.0",
    "attribution": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
    "licence": "ODbL",
    "query": "60.229917843587,11.16630979382"
  },
  "features": {
    "type": "Feature",
    "properties": {
      "geocoding": {
        "place_id": "42700574",
        "osm_type": "node",
        "osm_id": "3110596255",
        "type": "house",
        "accuracy": 0,
        "label": "1, Løvenbergvegen, Mogreina, Ullensaker, Akershus, 2054, Norway",
        "name": null,
        "housenumber": "1",
        "street": "Løvenbergvegen",
        "postcode": "2054",
        "county": "Akershus",
        "country": "Norway",
        "admin": {
          "level7": "Ullensaker",
          "level4": "Akershus",
          "level2": "Norway"
        }
      }
    },
    "geometry": {
      "type": "Point",
      "coordinates": [
        11.1658572,
        60.2301296
      ]
    }
  }
}
```

# Place Output

The [/reverse](Reverse.md), [/search](Search.md) and [/lookup](Lookup.md)
API calls produce very similar output which is explained in this section.
There is one section for each format. The format correspond to what was
selected via the `format` parameter.

## JSON

The JSON format returns an array of places (for search and lookup) or
a single place (for reverse) of the following format:

```
  {
    "place_id": 100149,
    "licence": "Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright",
    "osm_type": "node",
    "osm_id": "107775",
    "boundingbox": ["51.3473219", "51.6673219", "-0.2876474", "0.0323526"],
    "lat": "51.5073219",
    "lon": "-0.1276474",
    "display_name": "London, Greater London, England, SW1A 2DU, United Kingdom",
    "class": "place",
    "type": "city",
    "importance": 0.9654895765402,
    "icon": "http://metis.lti.cs.cmu.edu:8085/images/mapicons/poi_place_city.p.20.png",
    "address": {
      "city": "London",
      "state_district": "Greater London",
      "state": "England",
      "ISO3166-2-lvl4": "GB-ENG",
      "postcode": "SW1A 2DU",
      "country": "United Kingdom",
      "country_code": "gb"
    },
    "extratags": {
      "capital": "yes",
      "website": "http://www.london.gov.uk",
      "wikidata": "Q84",
      "wikipedia": "en:London",
      "population": "8416535"
    }
  }
```

The possible fields are:

 * `place_id` - reference to the internal database ID ([see notes](#place_id-is-not-a-persistent-id))
 * `osm_type`, `osm_id` - reference to the OSM object ([see notes](#osm-reference))
 * `boundingbox` - area of corner coordinates ([see notes](#boundingbox))
 * `lat`, `lon` - latitude and longitude of the centroid of the object
 * `display_name` - full comma-separated address
 * `class`, `type` - key and value of the main OSM tag
 * `importance` - computed importance rank
 * `icon` - link to class icon (if available)
 * `address` - dictionary of address details (only with `addressdetails=1`,
   [see notes](#addressdetails))
 * `extratags` - dictionary with additional useful tags like website or maxspeed
   (only with `extratags=1`)
 * `namedetails` - dictionary with full list of available names including ref etc.
 * `geojson`, `svg`, `geotext`, `geokml` - full geometry
   (only with the appropriate `polygon_*` parameter)

## JSONv2

This is the same as the JSON format with two changes:

 * `class` renamed to `category`
 * additional field `place_rank` with the search rank of the object

## GeoJSON

This format follows the [RFC7946](https://geojson.org). Every feature includes
a bounding box (`bbox`).

The properties object has the following fields:

 * `place_id` - reference to the internal database ID ([see notes](#place_id-is-not-a-persistent-id))
 * `osm_type`, `osm_id` - reference to the OSM object ([see notes](#osm-reference))
 * `category`, `type` - key and value of the main OSM tag
 * `display_name` - full comma-separated address
 * `place_rank` - class search rank
 * `importance` - computed importance rank
 * `icon` - link to class icon (if available)
 * `address` - dictionary of address details (only with `addressdetails=1`,
   [see notes](#addressdetails))
 * `extratags` - dictionary with additional useful tags like `website` or `maxspeed`
   (only with `extratags=1`)
 * `namedetails` - dictionary with full list of available names including ref etc.

Use `polygon_geojson` to output the full geometry of the object instead
of the centroid.

## GeocodeJSON

The GeocodeJSON format follows the
[GeocodeJSON spec 0.1.0](https://github.com/geocoders/geocodejson-spec).
The following feature attributes are implemented:

 * `osm_type`, `osm_id` - reference to the OSM object (unofficial extension, [see notes](#osm-reference))
 * `type` - the 'address level' of the object ('house', 'street', `district`, `city`,
            `county`, `state`, `country`, `locality`)
 * `osm_key`- key of the main tag of the OSM object (e.g. boundary, highway, amenity)
 * `osm_value` - value of the main tag of the OSM object (e.g. residential, restaurant)
 * `label` - full comma-separated address
 * `name` - localised name of the place
 * `housenumber`, `street`, `locality`, `district`, `postcode`, `city`,
   `county`, `state`, `country` -
   provided when it can be determined from the address
 * `admin` - list of localised names of administrative boundaries (only with `addressdetails=1`)

Use `polygon_geojson` to output the full geometry of the object instead
of the centroid.

## XML

The XML response returns one or more place objects in slightly different
formats depending on the API call.

### Reverse

```
<reversegeocode timestamp="Sat, 11 Aug 18 11:53:21 +0000"
                attribution="Data © OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright"
                querystring="lat=48.400381&lon=11.745876&zoom=5&format=xml">
  <result place_id="179509537" osm_type="relation" osm_id="2145268" ref="BY" place_rank="15" address_rank="15"
          lat="48.9467562" lon="11.4038717"
          boundingbox="47.2701114,50.5647142,8.9763497,13.8396373">
       Bavaria, Germany
  </result>
  <addressparts>
     <state>Bavaria</state>
     <ISO3166-2-lvl4>DE-BY</ISO3166-2-lvl4>
     <country>Germany</country>
     <country_code>de</country_code>
  </addressparts>
  <extratags>
    <tag key="place" value="state"/>
    <tag key="wikidata" value="Q980"/>
    <tag key="wikipedia" value="de:Bayern"/>
    <tag key="population" value="12520000"/>
    <tag key="name:prefix" value="Freistaat"/>
  </extratags>
</reversegeocode>
```

The attributes of the outer `reversegeocode` element return generic information
about the query, including the time when the response was sent (in UTC),
attribution to OSM and the original querystring.

The place information can be found in the `result` element. The attributes of that element contain:

 * `place_id` - reference to the internal database ID ([see notes](#place_id-is-not-a-persistent-id))
 * `osm_type`, `osm_id` - reference to the OSM object ([see notes](#osm-reference))
 * `ref` - content of `ref` tag if it exists
 * `lat`, `lon` - latitude and longitude of the centroid of the object
 * `boundingbox` - comma-separated list of corner coordinates ([see notes](#boundingbox))

The full address of the result can be found in the content of the
`result` element as a comma-separated list.

Additional information requested with `addressdetails=1`, `extratags=1` and
`namedetails=1` can be found in extra elements.

### Search and Lookup

```
<searchresults timestamp="Sat, 11 Aug 18 11:55:35 +0000"
               attribution="Data © OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright"
               querystring="london" polygon="false" exclude_place_ids="100149"
               more_url="http://metis.lti.cs.cmu.edu:8085/search.php?q=london&addressdetails=1&extratags=1&exclude_place_ids=100149&format=xml&accept-language=en-US%2Cen%3Bq%3D0.7%2Cde%3Bq%3D0.3">
  <place place_id="100149" osm_type="node" osm_id="107775" place_rank="15" address_rank="15"
         boundingbox="51.3473219,51.6673219,-0.2876474,0.0323526" lat="51.5073219" lon="-0.1276474"
         display_name="London, Greater London, England, SW1A 2DU, United Kingdom"
         class="place" type="city" importance="0.9654895765402"
         icon="http://metis.lti.cs.cmu.edu:8085/images/mapicons/poi_place_city.p.20.png">
    <extratags>
      <tag key="capital" value="yes"/>
      <tag key="website" value="http://www.london.gov.uk"/>
      <tag key="wikidata" value="Q84"/>
      <tag key="wikipedia" value="en:London"/>
      <tag key="population" value="8416535"/>
    </extratags>
    <city>London</city>
    <state_district>Greater London</state_district>
    <state>England</state>
    <ISO3166-2-lvl4>GB-ENG</ISO3166-2-lvl4>
    <postcode>SW1A 2DU</postcode>
    <country>United Kingdom</country>
    <country_code>gb</country_code>
  </place>
</searchresults>
```

The attributes of the outer `searchresults` or `lookupresults` element return
generic information about the query:

 * `timestamp` - UTC time when the response was sent
 * `attribution` - OSM licensing information
 * `querystring` - original query
 * `polygon` - true when extra geometry information was requested
 * `exclude_place_ids` - IDs of places that should be ignored in a follow-up request
 * `more_url` - search call that will yield additional results for the query
   just sent

The place information can be found in the `place` elements, of which there may
be more than one. The attributes of that element contain:

 * `place_id` - reference to the internal database ID ([see notes](#place_id-is-not-a-persistent-id))
 * `osm_type`, `osm_id` - reference to the OSM object ([see notes](#osm-reference))
 * `ref` - content of `ref` tag if it exists
 * `lat`, `lon` - latitude and longitude of the centroid of the object
 * `boundingbox` - comma-separated list of corner coordinates ([see notes](#boundingbox))
 * `place_rank` - class [search rank](../customize/Ranking.md#search-rank)
 * `address_rank` - place [address rank](../customize/Ranking.md#address-rank)
 * `display_name` - full comma-separated address
 * `class`, `type` - key and value of the main OSM tag
 * `importance` - computed importance rank
 * `icon` - link to class icon (if available)

When `addressdetails=1` is requested, the localised address parts appear
as subelements with the type of the address part.

Additional information requested with `extratags=1` and `namedetails=1` can
be found in extra elements as sub-element of `extratags` and `namedetails`
respectively.


## Notes on field values

### place_id is not a persistent id

The `place_id` is an internal identifier that is assigned data is imported
into the database. The same OSM object will have a different value
on another server. It may even change its ID on the same server when it is
removed and reimported while updating the database with fresh OSM data.
It is thus not useful to treat it as permanent for later use.

The combination `osm_type`+`osm_id` is slightly better but remember in
OpenStreetMap mappers can delete, split, recreate places (and those
get a new `osm_id`), there is no link between those old and new ids.
Places can also change their meaning without changing their `osm_id`,
e.g. when a restaurant is retagged as supermarket. For a more in-depth
discussion see [Permanent ID](https://wiki.openstreetmap.org/wiki/Permanent_ID).

If you need an ID that is consistent over multiple installations of the endpoint,
then you should use the combination of `osm_type`+`osm_id`+`class`.

### OSM reference

The endpoint may sometimes return special objects that do not correspond directly
to an object in OpenStreetMap. These are:

* **Postcodes**. It returns a postcode point created from all mapped
  postcodes of the same name. The class and type of these object is `place=postcdode`.
  No `osm_type` and `osm_id` are included in the result.
* **Housenumber interpolations**. It returns a single interpolated
  housenumber from the interpolation way. The class and type are `place=house`
  and `osm_type` and `osm_id` correspond to the interpolation way in OSM.
* **TIGER housenumber.** It returns a single interpolated housenumber
  from the TIGER data. The class and type are `place=house`
  and `osm_type` and `osm_id` correspond to the street mentioned in the result.

Please note that the `osm_type` and `osm_id` returned may be changed in the
future. You should not expect to only find `node`, `way` and `relation` for
the type.

### boundingbox

Comma separated list of min latitude, max latitude, min longitude, max longitude.
The whole planet would be `-90,90,-180,180`.

Can be used to pan and center the map on the result, for example with leafletjs
mapping library
`map.fitBounds([[bbox[0],bbox[2]],[bbox[1],bbox[3]]], {padding: [20, 20], maxzoom: 16});`

Bounds crossing the antimeridian have a min latitude -180 and max latitude 180,
essentially covering the entire planet.

### addressdetails

Address details in the xml and json formats return a list of names together
with a designation label. Per default the following labels may appear:

 * continent
 * country, country_code
 * region, state, state_district, county, ISO3166-2-lvl<admin_level>
 * municipality, city, town, village
 * city_district, district, borough, suburb, subdivision
 * hamlet, croft, isolated_dwelling
 * neighbourhood, allotments, quarter
 * city_block, residential, farm, farmyard, industrial, commercial, retail
 * road
 * house_number, house_name
 * emergency, historic, military, natural, landuse, place, railway,
   man_made, aerialway, boundary, amenity, aeroway, club, craft, leisure,
   office, mountain_pass, shop, tourism, bridge, tunnel, waterway
 * postcode

They roughly correspond to the classification of the OpenStreetMap data
according to either the `place` tag or the main key of the object.
# Frequently Asked Questions

## API Results

#### 1. The address of my search results contains far-away places that don't belong there.

The endpoints computes the address from two sources in the OpenStreetMap data:
from administrative boundaries and from place nodes. Boundaries are the more
useful source. They precisely describe an area. So it is very clear for
the endpoints if a point belongs to an area or not. Place nodes are more complicated.
These are only points without any precise extent. So it has to take a
guess and assume that an address belongs to the closest place node it can find.
In an ideal world, the endpoints would not need the place nodes but there are
many places on earth where there are no precise boundaries available for
all parts that make up an address. This is in particular true for the more
local address parts, like villages and suburbs. Therefore it is not possible
to completely dismiss place nodes. And sometimes they sneak in where they
don't belong.

As a OpenStreetMap mapper, you can improve the situation in two ways: if you
see a place node for which already an administrative area exists, then you
should _link_ the two by adding the node with a 'label' role to the boundary
relation. If there is no administrative area, you can add the approximate
extent of the place and tag it place=<something> as well.

#### 2. When doing reverse search, the address details have parts that don't contain the point I was looking up.

There is a common misconception how the reverse API call works.
Reverse does not give you the address of the point you asked for. Reverse
returns the closest object to the point you asked for and then returns the
address of that object. Now, if you are close to a border, then the closest
object may be across that border. When it then returns the address,
it contains the county/state/country across the border.

#### 3. I get different counties/states/countries when I change the zoom parameter in the reverse query. How is that possible?

This is basically the same problem as in the previous answer.
The zoom level influences at which search rank it starts looking
for the closest object. So the closest house number maybe on one side of the
border while the closest street is on the other. As the address details contain
the address of the closest object found, you might sometimes get one result,
sometimes the other for the closest point.

#### 4. Can you return the continent?

The endpoint assigns each map feature one country. Those outside any administrative
boundaries are assigned a special no-country. Continents or other super-national
administrations (e.g. European Union, NATO, Custom unions) are not supported.

#### 5. My result has a wrong postcode. Where does it come from?

Most places in OSM don't have a postcode, so the endpoint tries to interpolate
one. It first look at all the places that make up the address of the place.
If one of them has a postcode defined, this is the one to be used. When
none of the address parts has a postcode either, the endpoint interpolates one
from the surrounding objects. If the postcode is for your result is one, then
most of the time there is an OSM object with the wrong postcode nearby.

Below is a list of editing API you could use for fetching and saving raw geodata from/to the OpenStreetMap database APIs. For the following APIs, you should use the endpoint http://miniserver1875.asuscomm.com:3000/. To find out more about the `http://miniserver1875.asuscomm.com:3000/` APIs you could do `from utils import get_api_documentation_map` and then use get_api_documentation_map(API) to learn more about the API.
{
    "GET /api/0.6/map": "Miscellaneous - Retrieving map data by bounding box. The following command returns:",
    "PUT /api/0.6/changeset/create": "Changesets - Create. The payload of a changeset creation request is the metadata of this changeset. The body of the request has to include one or more <tt>changeset</tt> elements, which optionally include an arbitrary number of tags (such as 'comment', 'created_by\", ...). All <tt>changeset</tt> elements need to be enclosed in an <tt>osm</tt> element.",
    "GET /api/0.6/changeset/#id?<span style\"border:thin solid black\">include_discussion''true''</span>": "Changesets - Read. Returns the changeset with the given <tt>id</tt> in OSM-XML format.",
    "PUT /api/0.6/changeset/#id": "Changesets - Update. For updating tags on the changeset, e.g. changeset {{tag|comment|foo}}.",
    "PUT /api/0.6/changeset/#id/close": "Changesets - Close. Closes a changeset. A changeset may already have been closed without the owner issuing this API call. In this case an error code is returned.",
    "GET /api/0.6/changeset/#id/download": "Changesets - Download. Returns the [[OsmChange]] document describing all changes associated with the changeset.",
    "POST /api/0.6/changeset/#id/expand_bbox": "Changesets - <s>Expand Bounding Box. ''Note: This endpoint was removed in December 2019. See this'' [https://github.com/openstreetmap/openstreetmap-website/issues/2316 GitHub issue].",
    "GET /api/0.6/changesets": "Changesets - Query. This is an API method for querying changesets. It supports querying by different criteria.",
    "POST /api/0.6/changeset/#id/upload": "Changesets - Diff upload. With this API call files in the [[OsmChange]] format can be uploaded to the server. This is guaranteed to be running in a transaction. So either all the changes are applied or none.",
    "POST /api/0.6/changeset/#id/comment": "Changeset discussion - Comment. Add a comment to a changeset. The changeset must be closed.",
    "POST /api/0.6/changeset/#id/subscribe": "Changeset discussion - Subscribe. Subscribe to the discussion of a changeset to receive notifications for new comments.",
    "POST /api/0.6/changeset/#id/unsubscribe": "Changeset discussion - Unsubscribe. Unsubscribe from the discussion of a changeset to stop receiving notifications.",
    "POST /api/0.6/changeset/comment/#comment_id/hide": "Changeset discussion - Hide changeset comment. Sets visible flag on changeset comment to false.",
    "POST /api/0.6/changeset/comment/#comment_id/unhide": "Changeset discussion - Unhide changeset comment. Sets visible flag on changeset comment to true.",
    "PUT /api/0.6/[node|way|relation]/create": "Elements - Create. Creates a new element of the specified type. Note that the entire request should be wrapped in a <code><osm>...</osm></code> element.",
    "GET /api/0.6/[node|way|relation]/#id": "Elements - Read. Returns the XML representation of the element.",
    "PUT /api/0.6/[node|way|relation]/#id": "Elements - Update. Updates data from a preexisting element. A full representation of the element as it should be after the update has to be provided. Any tags, way-node refs, and relation members that remain unchanged must be in the update as well. A version number must be provided as well, it '''must match''' the current version of the element in the database.",
    "DELETE /api/0.6/[node|way|relation]/#id": "Elements - Delete. Expects a valid XML representation of the element to be deleted.",
    "GET /api/0.6/[node|way|relation]/#id/history": "Elements - History. Retrieves all old versions of an element. ([https://api.openstreetmap.org/api/0.6/way/250066046/history example])",
    "GET /api/0.6/[node|way|relation]/#id/#version": "Elements - Version. Retrieves a specific version of the element.",
    "GET /api/0.6/[nodes|ways|relations]?#parameters": "Elements - Multi fetch. Allows a user to fetch multiple elements at once.",
    "GET /api/0.6/[node|way|relation]/#id/relations": "Elements - Relations for element. Returns a XML document containing all (not deleted) relations in which the given element is used.",
    "GET /api/0.6/node/#id/ways": "Elements - Ways for node. Returns a XML document containing all the (not deleted) ways in which the given node is used.",
    "GET /api/0.6/[way|relation]/#id/full": "Elements - Full. This API call retrieves a way or relation and all other elements referenced by it",
    "POST /api/0.6/[node|way|relation]/#id/#version/redact?redaction#redaction_id": "Elements - Redaction. This is an API method originally created for the [[Open Database License|ODbL license change]] to hide contributions from users that did not accept the new CT/licence. It is now used by the [[Data working group|DWG]] to hide old versions of elements containing data privacy or copyright infringements. All API retrieval request for the element #version will return an HTTP error 403.",
    "GET /api/0.6/trackpoints?bbox<span style\"border:thin solid black\">''left''</span>,<span style\"border:thin solid black\">''bottom''</span>,<span style\"border:thin solid black\">''right''</span>,<span style\"border:thin solid black\">''top''</span>&page<span style\"border:thin solid black\">''pageNumber''</span>": "GPS traces - Get GPS Points. Use this to retrieve the GPS track points that are inside a given bounding box (formatted in a GPX format).",
    "POST /api/0.6/gpx/create": "GPS traces - Create. Use this to upload a GPX file or archive of GPX files. Requires authentication.",
    "PUT /api/0.6/gpx/#id": "GPS traces - Update. Use this to update the metadata of a GPX file. Only usable by the owner account. Requires authentication. The request body is an xml file with the same structure as the responses of [[API_v0.6#Download_Metadata:_GET_/api/0.6/gpx/#id/details|Download Metadata]].",
    "DELETE /api/0.6/gpx/#id": "GPS traces - Delete. Use this to delete a GPX file. Only usable by the owner account. Requires authentication.<br />The response body will be empty.",
    "GET /api/0.6/gpx/#id/details": "GPS traces - Download Metadata. Also available at <tt>GET /api/0.6/gpx/#id</tt>",
    "GET /api/0.6/gpx/#id/data": "GPS traces - Download Data. Use this to download the full GPX file. Available without authentication if the file is marked public. Otherwise only usable by the owner account and requires authentication.",
    "GET /api/0.6/user/gpx_files": "GPS traces - List. Use this to get a list of GPX traces owned by the authenticated user: Requires authentication.",
    "GET /api/0.6/user/#id": "Methods for user data - Details of a user. You can get the home location and the displayname of the user, by using",
    "GET /api/0.6/users?users#id1,#id2,...,#idn": "Methods for user data - Details of multiple users. You can get the details of a number of users via",
    "GET /api/0.6/user/details": "Methods for user data - Details of the logged-in user. You can get the home location and the displayname of the user, by using",
    "GET /api/0.6/user/preferences": "Methods for user data - Preferences of the logged-in user. The OSM server supports storing arbitrary user preferences. This can be used by editors, for example, to offer the same configuration wherever the user logs in, instead of a locally-stored configuration. For an overview of applications using the preferences-API and which key-schemes they use, see [[preferences|this wiki page]].",
    "GET /api/0.6/notes": "Map Notes API - Retrieving notes data by bounding box. Returns the existing notes in the specified bounding box. The notes will be ordered by the date of their last change, the most recent one will be first. The list of notes can be returned in several different forms (e.g. as executable JavaScript, XML, RSS, json and GPX) depending on the file extension.",
    "GET /api/0.6/notes/#id": "Map Notes API - Read. Returns the existing note with the given ID. The output can be in several formats (e.g. XML, RSS, json or GPX) depending on the file extension.",
    "POST /api/0.6/notes": "Map Notes API - Create a new note. ====XML====",
    "POST /api/0.6/notes/#id/comment": "Map Notes API - Create a new comment. Add a new comment to note #id",
    "POST /api/0.6/notes/#id/close": "Map Notes API - Close. Close a note as fixed.",
    "POST /api/0.6/notes/#id/reopen": "Map Notes API - Reopen. Reopen a closed note.",
    "DELETE /api/0.6/notes/#id": "Map Notes API - Hide. Hide (delete) a note.",
    "GET /api/0.6/notes/search": "Map Notes API - Search for notes. Returns notes that match the specified query. If no query is provided, the most recently updated notes are returned.",
    "GET /api/0.6/notes/feed": "Map Notes API - RSS Feed. Gets an RSS feed for notes within an area."
}
IMPORTANT: In general, you must always first try to use APIs to perform the task; however, you should use web browsing when there is no useful API available for the task. IMPORTANT: After you tried out using APIs, you must use web browsing to navigate to some URL containing contents that could verify whether the results you obtained by API calling is correct. IMPORTANT: You should ONLY interact with the environment provided to you AND NEVER ASK FOR HUMAN HELP.
When you think you have completed the request, please run the following command: <execute_bash> exit </execute_bash>.

obs - NullObservation(content='', observation='null')

Step 1:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: goto("http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin")
obs - **BrowserOutputObservation**
URL: http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin
Status code: 200
Error: False
Open pages: ['http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin']
Active page index: 0
Last browser action: goto("http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin")
Last browser action error: 
Focused element bid: 133
CONTENT: <::after> [ ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/)

Welcome, please sign in    


<::after> <::after>Username 

<::after> <::after>Password 

Sign in 

[ Forgot your password? ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/auth/forgotpassword/)

[ ](http://magento.com "Magento") Copyright © 2024 Magento Commerce Inc. All rights reserved. 



Step 2:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: fill("133", "admin")
fill("138", "admin1234")
click("141")
obs - **BrowserOutputObservation**
URL: http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/
Status code: 200
Error: True
Open pages: ['http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/']
Active page index: 0
Last browser action: fill("133", "admin")
fill("138", "admin1234")
click("141")
Last browser action error: TimeoutError: Timeout 500ms exceeded.
=========================== logs ===========================
waiting for get_by_test_id("141")
  locator resolved to <button value="" bid="141" browsergym_set_of_marks="1" b…>…</button>
attempting click action
  waiting for element to be visible, enabled and stable
  element is visible, enabled and stable
  scrolling into view if needed
  done scrolling
  performing click action
  click action done
  waiting for scheduled navigations to finish
============================================================
Focused element bid: 146
CONTENT: <::after>

<::before> [ ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/)

  * [ <::before> Dashboard  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/)
  * <::before> Sales 

**Sales** <::before>
    * ** Operations  **

      * [ Orders  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/order/)
      * [ Invoices  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/invoice/)
      * [ Shipments  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/shipment/)
      * [ Credit Memos  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/creditmemo/)
      * [ Billing Agreements  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/paypal/billing_agreement/)
      * [ Transactions  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/transactions/)
      * [ Braintree Virtual Terminal  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/braintree/virtual/)

  * <::before> Catalog 

**Catalog** <::before>
    * ** Inventory  **

      * [ Products  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/catalog/product/)
      * [ Categories  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/catalog/category/)

  * <::before> Customers 

**Customers** <::before>
    * [ All Customers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/customer/index/)
    * [ Now Online  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/customer/online/)
    * [ Login as Customer Log  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/loginascustomer_log/log/index/)
    * [ Customer Groups  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/customer/group/)

  * <::before> Marketing 

**Marketing** <::before>
    *       * ** Promotions  **

        * [ Catalog Price Rule  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/catalog_rule/promo_catalog/)
        * [ Cart Price Rules  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales_rule/promo_quote/)

      * ** Communications  **

        * [ Email Templates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/email_template/)
        * [ Newsletter Templates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/newsletter/template/)
        * [ Newsletter Queue  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/newsletter/queue/)
        * [ Newsletter Subscribers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/newsletter/subscriber/)

    *       * ** SEO & Search  **

        * [ URL Rewrites  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/url_rewrite/index/)
        * [ Search Terms  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/search/term/index/)
        * [ Search Synonyms  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/search/synonyms/index/)
        * [ Site Map  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/sitemap/)

      * ** User Content  **

        * [ All Reviews  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/review/product/index/)
        * [ Pending Reviews  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/review/product/pending/)

  * <::before> Content 

**Content** <::before>
    * ** Elements  **

      * [ Pages  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/cms/page/)
      * [ Blocks  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/cms/block/)
      * [ Widgets  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/widget_instance/)
      * [ Templates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/pagebuilder/template/)

    * ** Media  **

      * [ Media Gallery  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/media_gallery/media/index/)

    * ** Design  **

      * [ Configuration  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/theme/design_config/)
      * [ Themes  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_design_theme/)
      * [ Schedule  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_design/)

  * <::before> Reports 

**Reports** <::before>
    *       * ** Marketing  **

        * [ Products in Cart  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_shopcart/product/)
        * [ Search Terms  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/search/term/report/)
        * [ Abandoned Carts  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_shopcart/abandoned/)
        * [ Newsletter Problem Reports  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/newsletter/problem/)

      * ** Reviews  **

        * [ By Customers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_review/customer/)
        * [ By Products  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_review/product/)

    *       * ** Sales  **

        * [ Orders  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/sales/)
        * [ Tax  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/tax/)
        * [ Invoiced  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/invoiced/)
        * [ Shipping  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/shipping/)
        * [ Refunds  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/refunded/)
        * [ Coupons  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/coupons/)
        * [ PayPal Settlement  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/paypal/paypal_reports/)
        * [ Braintree Settlement  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/braintree/report/)

    *       * ** Customers  **

        * [ Order Total  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_customer/totals/)
        * [ Order Count  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_customer/orders/)
        * [ New  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_customer/accounts/)

      * ** Products  **

        * [ Views  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_product/viewed/)
        * [ Bestsellers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_sales/bestsellers/)
        * [ Low Stock  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_product/lowstock/)
        * [ Ordered  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_product/sold/)
        * [ Downloads  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_product/downloads/)

      * ** Statistics  **

        * [ Refresh Statistics  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/reports/report_statistics/)

    *       * ** Business Intelligence  **

        * [ <::after> Advanced Reporting  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/analytics/reports/show/)
        * [ <::after> BI Essentials  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/analytics/biessentials/signup/)

  * <::before> Stores 

**Stores** <::before>
    *       * ** Settings  **

        * [ All Stores  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_store/)
        * [ Configuration  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_config/)
        * [ Terms and Conditions  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/checkout/agreement/)
        * [ Order Status  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/sales/order_status/)

      * ** Inventory  **

        * [ Sources  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/inventory/source/index/)
        * [ Stocks  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/inventory/stock/index/)

      * ** Taxes  **

        * [ Tax Rules  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/tax/rule/)
        * [ Tax Zones and Rates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/tax/rate/)

    *       * ** Currency  **

        * [ Currency Rates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_currency/)
        * [ Currency Symbols  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_currencysymbol/)

      * ** Attributes  **

        * [ Product  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/catalog/product_attribute/)
        * [ Attribute Set  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/catalog/product_set/)
        * [ Rating  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/review/rating/)

      *   * <::before> System 

**System** <::before>
    *       * ** Data Transfer  **

        * [ Import  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/import/)
        * [ Export  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/export/)
        * [ Import/Export Tax Rates  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/tax/rate/importExport/)
        * [ Import History  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/history/)

      * ** Extensions  **

        * [ Integrations  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/integration/)

      * ** Tools  **

        * [ Cache Management  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/cache/)
        * [ Index Management  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/indexer/indexer/list/)

    *       * ** Permissions  **

        * [ All Users  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/user/)
        * [ Locked Users  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/locks/)
        * [ User Roles  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/user_role/)

      * ** Action Logs  **

        * [ Bulk Actions  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/bulk/index/)

      * ** Other Settings  **

        * [ Notifications  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/notification/)
        * [ Custom Variables  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_variable/)
        * [ Manage Encryption Key  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/crypt_key/)

  * [ <::before><::after> Find Partners & Extensions  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/marketplace/index/)



**JavaScript may be disabled in your browser.** To use this website you must first enable JavaScript in your browser. 

System Messages  : 0 




Dismiss All Completed Tasks  [ Bulk Actions Log ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/bulk/index/)

<::after>

#  Dashboard 

<::before><::after>

[ <::before><::after> admin  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_account/index/ "My Account")

  * [ Account Setting (  admin  ) ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_account/index/ "Account Setting")
  * [ Customer View ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/ "Customer View")
  * [ Sign Out ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/auth/logout/ "Sign Out")



[ <::before> ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/notification/index/ "Notifications")

<::before>

<::before><::after>

<::before><::after>

Scope: 

<::before><::after> <::after> All Store Views 

  * All Store Views 
  * Main Website 
  * Main Website Store 
  * Default Store View 



[ <::before> What is this?  ](https://docs.magento.com/user-guide/configuration/scope.html "What is this?")

Reload Data 

Advanced Reporting 

Gain new insights and take command of your business' performance, using our dynamic product, order, and customer reports tailored to your customer data. 

[ <::after> Go to Advanced Reporting  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/analytics/reports/show/ "Go to Advanced Reporting")

<::after>

Chart is disabled. To enable the chart, click [ here ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/system_config/edit/section/admin/#admin_dashboard-link) . 

<::before><::after>
  * Revenue  ** $0.00  **
  * Tax  ** $0.00  **
  * Shipping  ** $0.00  **
  * Quantity  **0 **



<::before><::after>

<::before><::after>
  * Bestsellers 
  * [ Most Viewed Products  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/productsViewed/ "Most Viewed Products")

  * [ New Customers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/customersNewest/ "New Customers")

  * [ Customers  ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/admin/dashboard/customersMost/ "Customers")




Product  |  Price  |  Quantity   
---|---|---  
Sprite Stasis Ball 65 cm  |  $27.00  |  6   
Quest Lumaflex™ Band  |  $19.00  |  6   
Sprite Stasis Ball 55 cm  |  $23.00  |  5   
Overnight Duffle  |  $45.00  |  5   
Sprite Yoga Strap 6 foot  |  $14.00  |  5   
  
Lifetime Sales 

** $0.00  **

Average Order 

** $0.00  **

Last Orders 

Customer  |  Items  |  Total   
---|---|---  
Sarah Miller  |  5  |  $0.00   
Grace Nguyen  |  4  |  $190.00   
Matt Baker  |  3  |  $151.40   
Lily Potter  |  4  |  $188.20   
Ava Brown  |  2  |  $83.40   
  
Last Search Terms 

Search Term  |  Results  |  Uses   
---|---|---  
tanks  |  23  |  1   
nike  |  0  |  3   
Joust Bag  |  10  |  4   
hollister  |  1  |  19   
Antonia Racer Tank  |  23  |  2   
  
Top Search Terms 

Search Term  |  Results  |  Uses   
---|---|---  
hollister  |  1  |  19   
Joust Bag  |  10  |  4   
Antonia Racer Tank  |  23  |  2   
tanks  |  23  |  1   
WP10  |  1  |  1   
  
<::after>

[ <::before> ](http://magento.com "Magento") Copyright © 2024 Magento Commerce Inc. All rights reserved. 

**Magento** ver. 2.4.6 

[ Privacy Policy ](https://www.adobe.com/privacy/policy.html) | [ Account Activity ](http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/admin/security/session/activity/) | [ Report an Issue ](https://github.com/magento/magento2/issues)

<::before> Close 



Step 3:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: goto("http://miniserver1875.asuscomm.com:3000")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108']
Active page index: 0
Last browser action: goto("http://miniserver1875.asuscomm.com:3000")
Last browser action error: 
Focused element bid: 145
CONTENT: <::after>

#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=7/42.896/-75.108) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=7/42.896/-75.108)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=7/42.896/-75.108)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=7/42.896/-75.108) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=7/42.896/-75.108)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=7/42.896/-75.108) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=7/42.896/-75.108) [ Short Link ](http://miniserver1875.asuscomm.com/go/ZdmCK) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=7/42.896/-75.108)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:42.896,-75.108?z=7 ](geo:42.896,-75.108?z=7)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  2727  x  1417 

50 km 

50 mi 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 4:
act - **IPythonRunCellAction**
THOUGHT: To find the route and driving time from Allentown, PA to the city where Amanda Kim lives, we need to follow these steps:

1. **Retrieve Amanda Kim's address from the shopping_admin API.**
2. **Use the map API to get the route and driving time from Allentown, PA to Amanda Kim's address.**

### Step 1: Retrieve Amanda Kim's Address

We will use the `get /V1/customers/search` API from the shopping_admin to find Amanda Kim's address.

Let's start by calling the API to search for Amanda Kim.
CODE:
import requests

# Define the API endpoint and headers
api_endpoint = "http://ec2-18-219-239-190.us-east-2.compute.amazonaws.com:7780/rest/default/V1/customers/search"
headers = {
    "Authorization": "Bearer eyJraWQiOiIxIiwiYWxnIjoiSFMyNTYifQ.eyJ1aWQiOjEsInV0eXBpZCI6MiwiaWF0IjoxNzI5ODU2MTYwLCJleHAiOjE3Mjk4NTk3NjB9.zi-J09uqeQbq--AqS7bBQBFw7M_FhmK_flCwRQhVAE0"
}

# Define the search criteria for Amanda Kim
params = {
    "searchCriteria[filterGroups][0][filters][0][field]": "firstname",
    "searchCriteria[filterGroups][0][filters][0][value]": "Amanda",
    "searchCriteria[filterGroups][1][filters][0][field]": "lastname",
    "searchCriteria[filterGroups][1][filters][0][value]": "Kim"
}

# Make the API request
response = requests.get(api_endpoint, headers=headers, params=params)
response.json()
obs - **IPythonRunCellObservation**
{'items': [{'id': 45,
   'group_id': 1,
   'default_billing': '45',
   'default_shipping': '45',
   'created_at': '2023-04-23 04:13:15',
   'updated_at': '2023-04-23 04:13:16',
   'created_in': 'Default Store View',
   'email': 'amanda.kim@gmail.com',
   'firstname': 'Amanda',
   'lastname': 'Kim',
   'store_id': 1,
   'website_id': 1,
   'addresses': [{'id': 45,
     'customer_id': 45,
     'region': {'region_code': 'NJ', 'region': 'New Jersey', 'region_id': 41},
     'region_id': 41,
     'country_id': 'US',
     'street': ['111 River St'],
     'telephone': '2015551234',
     'postcode': '07030',
     'city': 'Hoboken',
     'firstname': 'Amanda',
     'lastname': 'Kim',
     'default_shipping': True,
     'default_billing': True}],
   'disable_auto_group_change': 0,
   'extension_attributes': {'is_subscribed': False}}],
 'search_criteria': {'filter_groups': [{'filters': [{'field': 'firstname',
      'value': 'Amanda',
      'condition_type': 'eq'}]},
   {'filters': [{'field': 'lastname',
      'value': 'Kim',
      'condition_type': 'eq'}]}]},
 'total_count': 1}

Step 5:
act - **IPythonRunCellAction**
THOUGHT: Amanda Kim's address is:
- **Street**: 111 River St
- **City**: Hoboken
- **State**: New Jersey (NJ)
- **Country**: United States (US)
- **Postcode**: 07030

### Step 2: Get the Route and Driving Time

Now, we will use the map API to get the route and driving time from Allentown, PA to Hoboken, NJ.

We will use the `route` service of the map API with the following parameters:
- **Profile**: 5000 (for car driving)
- **Service**: route
- **Coordinates**: Longitude and latitude of Allentown, PA and Hoboken, NJ

First, we need to get the coordinates for Allentown, PA and Hoboken, NJ.

#### Get Coordinates for Allentown, PA
CODE:
# Define the API endpoint for geocoding
geocode_endpoint = "http://miniserver1875.asuscomm.com:8085/search"
params_allentown = {
    "q": "Allentown, PA",
    "format": "json"
}

# Make the API request for Allentown, PA
response_allentown = requests.get(geocode_endpoint, params=params_allentown)
response_allentown.json()
obs - **IPythonRunCellObservation**
---------------------------------------------------------------------------
ConnectionRefusedError                    Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:199, in HTTPConnection._new_conn(self)
    198 try:
--> 199     sock = connection.create_connection(
    200         (self._dns_host, self.port),
    201         self.timeout,
    202         source_address=self.source_address,
    203         socket_options=self.socket_options,
    204     )
    205 except socket.gaierror as e:

File ~/.local/lib/python3.10/site-packages/urllib3/util/connection.py:85, in create_connection(address, timeout, source_address, socket_options)
     84 try:
---> 85     raise err
     86 finally:
     87     # Break explicitly a reference cycle

File ~/.local/lib/python3.10/site-packages/urllib3/util/connection.py:73, in create_connection(address, timeout, source_address, socket_options)
     72     sock.bind(source_address)
---> 73 sock.connect(sa)
     74 # Break explicitly a reference cycle

ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

NewConnectionError                        Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:789, in HTTPConnectionPool.urlopen(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, preload_content, decode_content, **response_kw)
    788 # Make the request on the HTTPConnection object
--> 789 response = self._make_request(
    790     conn,
    791     method,
    792     url,
    793     timeout=timeout_obj,
    794     body=body,
    795     headers=headers,
    796     chunked=chunked,
    797     retries=retries,
    798     response_conn=response_conn,
    799     preload_content=preload_content,
    800     decode_content=decode_content,
    801     **response_kw,
    802 )
    804 # Everything went great!

File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:495, in HTTPConnectionPool._make_request(self, conn, method, url, body, headers, retries, timeout, chunked, response_conn, preload_content, decode_content, enforce_content_length)
    494 try:
--> 495     conn.request(
    496         method,
    497         url,
    498         body=body,
    499         headers=headers,
    500         chunked=chunked,
    501         preload_content=preload_content,
    502         decode_content=decode_content,
    503         enforce_content_length=enforce_content_length,
    504     )
    506 # We are swallowing BrokenPipeError (errno.EPIPE) since the server is
    507 # legitimately able to close the connection after sending a valid response.
    508 # With this behaviour, the received response is still readable.

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:441, in HTTPConnection.request(self, method, url, body, headers, chunked, preload_content, decode_content, enforce_content_length)
    440     self.putheader(header, value)
--> 441 self.endheaders()
    443 # If we're given a body we start sending that in chunks.

File /usr/lib/python3.10/http/client.py:1278, in HTTPConnection.endheaders(self, message_body, encode_chunked)
   1277     raise CannotSendHeader()
-> 1278 self._send_output(message_body, encode_chunked=encode_chunked)

File /usr/lib/python3.10/http/client.py:1038, in HTTPConnection._send_output(self, message_body, encode_chunked)
   1037 del self._buffer[:]
-> 1038 self.send(msg)
   1040 if message_body is not None:
   1041 
   1042     # create a consistent interface to message_body

File /usr/lib/python3.10/http/client.py:976, in HTTPConnection.send(self, data)
    975 if self.auto_open:
--> 976     self.connect()
    977 else:

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:279, in HTTPConnection.connect(self)
    278 def connect(self) -> None:
--> 279     self.sock = self._new_conn()
    280     if self._tunnel_host:
    281         # If we're tunneling it means we're connected to our proxy.

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:214, in HTTPConnection._new_conn(self)
    213 except OSError as e:
--> 214     raise NewConnectionError(
    215         self, f"Failed to establish a new connection: {e}"
    216     ) from e
    218 # Audit hooks are only available in Python 3.8+

NewConnectionError: <urllib3.connection.HTTPConnection object at 0xffff8359bf10>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

MaxRetryError                             Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/requests/adapters.py:667, in HTTPAdapter.send(self, request, stream, timeout, verify, cert, proxies)
    666 try:
--> 667     resp = conn.urlopen(
    668         method=request.method,
    669         url=url,
    670         body=request.body,
    671         headers=request.headers,
    672         redirect=False,
    673         assert_same_host=False,
    674         preload_content=False,
    675         decode_content=False,
    676         retries=self.max_retries,
    677         timeout=timeout,
    678         chunked=chunked,
    679     )
    681 except (ProtocolError, OSError) as err:

File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:843, in HTTPConnectionPool.urlopen(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, preload_content, decode_content, **response_kw)
    841     new_e = ProtocolError("Connection aborted.", new_e)
--> 843 retries = retries.increment(
    844     method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    845 )
    846 retries.sleep()

File ~/.local/lib/python3.10/site-packages/urllib3/util/retry.py:519, in Retry.increment(self, method, url, response, error, _pool, _stacktrace)
    518     reason = error or ResponseError(cause)
--> 519     raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    521 log.debug("Incremented Retry for (url='%s'): %r", url, new_retry)

MaxRetryError: HTTPConnectionPool(host='miniserver1875.asuscomm.com', port=8085): Max retries exceeded with url: /search?q=Allentown%2C+PA&format=json (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0xffff8359bf10>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

ConnectionError                           Traceback (most recent call last)
Cell In[1], line 9
      3 params_allentown = {
      4     "q": "Allentown, PA",
      5     "format": "json"
      6 }
      8 # Make the API request for Allentown, PA
----> 9 response_allentown = requests.get(geocode_endpoint, params=params_allentown)
     10 response_allentown.json()

File ~/.local/lib/python3.10/site-packages/requests/api.py:73, in get(url, params, **kwargs)
     62 def get(url, params=None, **kwargs):
     63     r"""Sends a GET request.
     64 
     65     :param url: URL for the new :class:`Request` object.
   (...)
     70     :rtype: requests.Response
     71     """
---> 73     return request("get", url, params=params, **kwargs)

File ~/.local/lib/python3.10/site-packages/requests/api.py:59, in request(method, url, **kwargs)
     55 # By using the 'with' statement we are sure the session is closed, thus we
     56 # avoid leaving sockets open which can trigger a ResourceWarning in some
     57 # cases, and look like a memory leak in others.
     58 with sessions.Session() as session:
---> 59     return session.request(method=method, url=url, **kwargs)

File ~/.local/lib/python3.10/site-packages/requests/sessions.py:589, in Session.request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)
    584 send_kwargs = {
    585     "timeout": timeout,
    586     "allow_redirects": allow_redirects,
    587 }
    588 send_kwargs.update(settings)
--> 589 resp = self.send(prep, **send_kwargs)
    591 return resp

File ~/.local/lib/python3.10/site-packages/requests/sessions.py:703, in Session.send(self, request, **kwargs)
    700 start = preferred_clock()
    702 # Send the request
--> 703 r = adapter.send(request, **kwargs)
    705 # Total elapsed time of the request (approximately)
    706 elapsed = preferred_clock() - start

File ~/.local/lib/python3.10/site-packages/requests/adapters.py:700, in HTTPAdapter.send(self, request, stream, timeout, verify, cert, proxies)
    696     if isinstance(e.reason, _SSLError):
    697         # This branch is for urllib3 v1.22 and later.
    698         raise SSLError(e, request=request)
--> 700     raise ConnectionError(e, request=request)
    702 except ClosedPoolError as e:
    703     raise ConnectionError(e, request=request)

ConnectionError: HTTPConnectionPool(host='miniserver1875.asuscomm.com', port=8085): Max retries exceeded with url: /search?q=Allentown%2C+PA&format=json (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0xffff8359bf10>: Failed to establish a new connection: [Errno 111] Connection refused'))

Step 6:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: goto("http://miniserver1875.asuscomm.com:3000")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108']
Active page index: 0
Last browser action: goto("http://miniserver1875.asuscomm.com:3000")
Last browser action error: 
Focused element bid: 145
CONTENT: <::after>  
  
#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=7/42.896/-75.108)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=7/42.896/-75.108) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=7/42.896/-75.108)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=7/42.896/-75.108)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=7/42.896/-75.108) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=7/42.896/-75.108)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=7/42.896/-75.108) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=7/42.896/-75.108) [ Short Link ](http://miniserver1875.asuscomm.com/go/ZdmCK) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=7/42.896/-75.108)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:42.896,-75.108?z=7 ](geo:42.896,-75.108?z=7)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  2727  x  1417 

50 km 

50 mi 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 7:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: fill("145", "Allentown, PA")
click("147")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/search?query=Allentown%2C%20PA#map=14/40.6511/-75.4435
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/search?query=Allentown%2C%20PA#map=14/40.6511/-75.4435']
Active page index: 0
Last browser action: fill("145", "Allentown, PA")
click("147")
Last browser action error: 
Focused element bid: 147
CONTENT: <::after>  
  
#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=14/40.6511/-75.4435)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=14/40.6511/-75.4435) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=14/40.6511/-75.4435)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=14/40.6511/-75.4435)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=14/40.6511/-75.4435) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=14/40.6511/-75.4435)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=14/40.6511/-75.4435) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Search Results 

####  Results from [ OpenStreetMap Nominatim ](https://nominatim.openstreetmap.org/)

  * Aerodrome [ Lehigh Valley International Airport, 3311, Airport Road, Allentown, Lehigh County, 18109, United States ](/way/224657219)
  * Museum [ Allentown Art Museum, 31, North 5th Street, Center City, Allentown, Lehigh County, 18101, United States ](/way/440111259)
  * Aerodrome [ Allentown Queen City Municipal Airport (KXLL), Vultee Street, South Side, Allentown, Lehigh County, 18103, United States ](/node/368989593)
  * Motorway [ I 78;PA 309, South Side, Allentown, Lehigh County, 18103, United States ](/way/27209365)
  * Motorway [ I 78;PA 309, South Side, Allentown, Lehigh County, 18105, United States ](/way/11930013)
  * Retail Area [ Allentown Shoppes, Allentown, Lehigh County, United States ](/way/1019262134)
  * Tower [ Lookout to City of Allentown, I 78;PA 309, South Side, Allentown, Lehigh County, 18105, United States ](/node/5718680680)
  * Clinic [ Patient First - Allentown, 3178, Tilghman Street, Hilltown, Allentown, Lehigh County, 18104, United States ](/node/5821469624)
  * Primary Road [ West Walnut Street, Downtown, Allentown, Lehigh County, 18104, United States ](/way/874686261)
  * Primary Road [ South 7th Street, Downtown, Allentown, Lehigh County, 18101, United States ](/way/874686263)



[ More results ](/geocoder/search_osm_nominatim?exclude=8779647%2C9914480%2C209811%2C6531938%2C5992052%2C6538713%2C12973682%2C620999%2C635640%2C12480901%2C12484154&maxlat=45.51404592560427&maxlon=-68.07128906250001&minlat=40.16208338164619&minlon=-78.28857421875001&query=Allentown%2C+PA)

Loading... 

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=14/40.6511/-75.4435) [ Short Link ](http://miniserver1875.asuscomm.com/go/Zclzgunp-) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=14/40.6511/-75.4435)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:40.6511,-75.4435?z=14 ](geo:40.6511,-75.4435?z=14)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  15  x  11 

500 m 

2000 ft 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 8:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: fill("145", "Hoboken, NJ")
click("147")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/search?query=Hoboken%2C%20NJ#map=14/40.7447/-74.0291
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/search?query=Hoboken%2C%20NJ#map=14/40.7447/-74.0291']
Active page index: 0
Last browser action: fill("145", "Hoboken, NJ")
click("147")
Last browser action error: 
Focused element bid: 147
CONTENT: <::after>  
  
#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=14/40.7447/-74.0291)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=14/40.7447/-74.0291) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=14/40.7447/-74.0291)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=14/40.7447/-74.0291)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=14/40.7447/-74.0291) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=14/40.7447/-74.0291)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=14/40.7447/-74.0291) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Search Results 

####  Results from [ OpenStreetMap Nominatim ](https://nominatim.openstreetmap.org/)

  * Town [ Hoboken, Hudson County, New Jersey, 07030, United States ](/relation/170708)
  * Railway Station [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/node/6556450069)
  * Buffer Stop [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/node/7362088815)
  * Train Station Building [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/way/812959161)
  * Railway Platform [ Hoboken (PATH), Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/way/787399944)



[ More results ](/geocoder/search_osm_nominatim?exclude=13539646%2C680456%2C1110698%2C1116838%2C1119670%2C11587894%2C11292099%2C11356774%2C11357637&maxlat=40.6726965597354&maxlon=-75.4035472869873&minlat=40.6293924332488&minlon=-75.48336982727052&query=Hoboken%2C+NJ)

Loading... 

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=14/40.7447/-74.0291) [ Short Link ](http://miniserver1875.asuscomm.com/go/Zct3jm2T-) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=14/40.7447/-74.0291)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:40.7447,-74.0291?z=14 ](geo:40.7447,-74.0291?z=14)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  15  x  11 

500 m 

2000 ft 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 9:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: click("149")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/directions#map=14/40.7448/-74.0442
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/directions#map=14/40.7448/-74.0442']
Active page index: 0
Last browser action: click("149")
Last browser action error: 
Focused element bid: 43
CONTENT: <::after>  
  
#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=14/40.7448/-74.0442)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=14/40.7448/-74.0442) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=14/40.7448/-74.0442)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=14/40.7448/-74.0442)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=14/40.7448/-74.0442) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=14/40.7448/-74.0442)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=14/40.7448/-74.0442) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Search Results 

####  Results from [ OpenStreetMap Nominatim ](https://nominatim.openstreetmap.org/)

  * Town [ Hoboken, Hudson County, New Jersey, 07030, United States ](/relation/170708)
  * Railway Station [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/node/6556450069)
  * Buffer Stop [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/node/7362088815)
  * Train Station Building [ Hoboken, Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/way/812959161)
  * Railway Platform [ Hoboken (PATH), Hudson Place, Hoboken, Hudson County, New Jersey, 07030, United States ](/way/787399944)



[ More results ](/geocoder/search_osm_nominatim?exclude=13539646%2C680456%2C1110698%2C1116838%2C1119670%2C11587894%2C11292099%2C11356774%2C11357637&maxlat=40.6726965597354&maxlon=-75.4035472869873&minlat=40.6293924332488&minlon=-75.48336982727052&query=Hoboken%2C+NJ)

Loading... 

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=14/40.7448/-74.0442) [ Short Link ](http://miniserver1875.asuscomm.com/go/Zct3hM20-) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=14/40.7448/-74.0442)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:40.7448,-74.0442?z=14 ](geo:40.7448,-74.0442?z=14)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  21  x  11 

500 m 

2000 ft 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 10:
act - **IPythonRunCellAction**
THOUGHT: Now that we have the coordinates for both Allentown, PA and Hoboken, NJ, we can use the map API to get the route and driving time.

### Coordinates:
- **Allentown, PA**: 40.6511, -75.4435
- **Hoboken, NJ**: 40.7448, -74.0442

We will use the `route` service of the map API with these coordinates.
CODE:
# Define the API endpoint for routing
route_endpoint = "http://miniserver1875.asuscomm.com:5000/route/v1/test"

# Define the coordinates for Allentown, PA and Hoboken, NJ
coordinates = "40.6511,-75.4435;40.7448,-74.0442"

# Define the parameters for the route request
params_route = {
    "alternatives": "false",
    "steps": "true",
    "geometries": "geojson",
    "overview": "full"
}

# Make the API request for the route
response_route = requests.get(f"{route_endpoint}/{coordinates}", params=params_route)
response_route.json()
obs - **IPythonRunCellObservation**
---------------------------------------------------------------------------
ConnectionRefusedError                    Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:199, in HTTPConnection._new_conn(self)
    198 try:
--> 199     sock = connection.create_connection(
    200         (self._dns_host, self.port),
    201         self.timeout,
    202         source_address=self.source_address,
    203         socket_options=self.socket_options,
    204     )
    205 except socket.gaierror as e:

File ~/.local/lib/python3.10/site-packages/urllib3/util/connection.py:85, in create_connection(address, timeout, source_address, socket_options)
     84 try:
---> 85     raise err
     86 finally:
     87     # Break explicitly a reference cycle

File ~/.local/lib/python3.10/site-packages/urllib3/util/connection.py:73, in create_connection(address, timeout, source_address, socket_options)
     72     sock.bind(source_address)
---> 73 sock.connect(sa)
     74 # Break explicitly a reference cycle

ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

NewConnectionError                        Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:789, in HTTPConnectionPool.urlopen(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, preload_content, decode_content, **response_kw)
    788 # Make the request on the HTTPConnection object
--> 789 response = self._make_request(
    790     conn,
    791     method,
    792     url,
    793     timeout=timeout_obj,
    794     body=body,
    795     headers=headers,
    796     chunked=chunked,
    797     retries=retries,
    798     response_conn=response_conn,
    799     preload_content=preload_content,
    800     decode_content=decode_content,
    801     **response_kw,
    802 )
    804 # Everything went great!

File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:495, in HTTPConnectionPool._make_request(self, conn, method, url, body, headers, retries, timeout, chunked, response_conn, preload_content, decode_content, enforce_content_length)
    494 try:
--> 495     conn.request(
    496         method,
    497         url,
    498         body=body,
    499         headers=headers,
    500         chunked=chunked,
    501         preload_content=preload_content,
    502         decode_content=decode_content,
    503         enforce_content_length=enforce_content_length,
    504     )
    506 # We are swallowing BrokenPipeError (errno.EPIPE) since the server is
    507 # legitimately able to close the connection after sending a valid response.
    508 # With this behaviour, the received response is still readable.

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:441, in HTTPConnection.request(self, method, url, body, headers, chunked, preload_content, decode_content, enforce_content_length)
    440     self.putheader(header, value)
--> 441 self.endheaders()
    443 # If we're given a body we start sending that in chunks.

File /usr/lib/python3.10/http/client.py:1278, in HTTPConnection.endheaders(self, message_body, encode_chunked)
   1277     raise CannotSendHeader()
-> 1278 self._send_output(message_body, encode_chunked=encode_chunked)

File /usr/lib/python3.10/http/client.py:1038, in HTTPConnection._send_output(self, message_body, encode_chunked)
   1037 del self._buffer[:]
-> 1038 self.send(msg)
   1040 if message_body is not None:
   1041 
   1042     # create a consistent interface to message_body

File /usr/lib/python3.10/http/client.py:976, in HTTPConnection.send(self, data)
    975 if self.auto_open:
--> 976     self.connect()
    977 else:

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:279, in HTTPConnection.connect(self)
    278 def connect(self) -> None:
--> 279     self.sock = self._new_conn()
    280     if self._tunnel_host:
    281         # If we're tunneling it means we're connected to our proxy.

File ~/.local/lib/python3.10/site-packages/urllib3/connection.py:214, in HTTPConnection._new_conn(self)
    213 except OSError as e:
--> 214     raise NewConnectionError(
    215         self, f"Failed to establish a new connection: {e}"
    216     ) from e
    218 # Audit hooks are only available in Python 3.8+

NewConnectionError: <urllib3.connection.HTTPConnection object at 0xffff829afd00>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

MaxRetryError                             Traceback (most recent call last)
File ~/.local/lib/python3.10/site-packages/requests/adapters.py:667, in HTTPAdapter.send(self, request, stream, timeout, verify, cert, proxies)
    666 try:
--> 667     resp = conn.urlopen(
    668         method=request.method,
    669         url=url,
    670         body=request.body,
    671         headers=request.headers,
    672         redirect=False,
    673         assert_same_host=False,
    674         preload_content=False,
    675         decode_content=False,
    676         retries=self.max_retries,
    677         timeout=timeout,
    678         chunked=chunked,
    679     )
    681 except (ProtocolError, OSError) as err:

File ~/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:843, in HTTPConnectionPool.urlopen(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, preload_content, decode_content, **response_kw)
    841     new_e = ProtocolError("Connection aborted.", new_e)
--> 843 retries = retries.increment(
    844     method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    845 )
    846 retries.sleep()

File ~/.local/lib/python3.10/site-packages/urllib3/util/retry.py:519, in Retry.increment(self, method, url, response, error, _pool, _stacktrace)
    518     reason = error or ResponseError(cause)
--> 519     raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    521 log.debug("Incremented Retry for (url='%s'): %r", url, new_retry)

MaxRetryError: HTTPConnectionPool(host='miniserver1875.asuscomm.com', port=5000): Max retries exceeded with url: /route/v1/test/40.6511,-75.4435;40.7448,-74.0442?alternatives=false&steps=true&geometries=geojson&overview=full (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0xffff829afd00>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

ConnectionError                           Traceback (most recent call last)
Cell In[1], line 16
      8 params_route = {
      9     "alternatives": "false",
     10     "steps": "true",
     11     "geometries": "geojson",
     12     "overview": "full"
     13 }
     15 # Make the API request for the route
---> 16 response_route = requests.get(f"{route_endpoint}/{coordinates}", params=params_route)
     17 response_route.json()

File ~/.local/lib/python3.10/site-packages/requests/api.py:73, in get(url, params, **kwargs)
     62 def get(url, params=None, **kwargs):
     63     r"""Sends a GET request.
     64 
     65     :param url: URL for the new :class:`Request` object.
   (...)
     70     :rtype: requests.Response
     71     """
---> 73     return request("get", url, params=params, **kwargs)

File ~/.local/lib/python3.10/site-packages/requests/api.py:59, in request(method, url, **kwargs)
     55 # By using the 'with' statement we are sure the session is closed, thus we
     56 # avoid leaving sockets open which can trigger a ResourceWarning in some
     57 # cases, and look like a memory leak in others.
     58 with sessions.Session() as session:
---> 59     return session.request(method=method, url=url, **kwargs)

File ~/.local/lib/python3.10/site-packages/requests/sessions.py:589, in Session.request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)
    584 send_kwargs = {
    585     "timeout": timeout,
    586     "allow_redirects": allow_redirects,
    587 }
    588 send_kwargs.update(settings)
--> 589 resp = self.send(prep, **send_kwargs)
    591 return resp

File ~/.local/lib/python3.10/site-packages/requests/sessions.py:703, in Session.send(self, request, **kwargs)
    700 start = preferred_clock()
    702 # Send the request
--> 703 r = adapter.send(request, **kwargs)
    705 # Total elapsed time of the request (approximately)
    706 elapsed = preferred_clock() - start

File ~/.local/lib/python3.10/site-packages/requests/adapters.py:700, in HTTPAdapter.send(self, request, stream, timeout, verify, cert, proxies)
    696     if isinstance(e.reason, _SSLError):
    697         # This branch is for urllib3 v1.22 and later.
    698         raise SSLError(e, request=request)
--> 700     raise ConnectionError(e, request=request)
    702 except ClosedPoolError as e:
    703     raise ConnectionError(e, request=request)

ConnectionError: HTTPConnectionPool(host='miniserver1875.asuscomm.com', port=5000): Max retries exceeded with url: /route/v1/test/40.6511,-75.4435;40.7448,-74.0442?alternatives=false&steps=true&geometries=geojson&overview=full (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0xffff829afd00>: Failed to establish a new connection: [Errno 111] Connection refused'))

Step 11:
act - **BrowseInteractiveAction**
BROWSER_ACTIONS: fill("158", "Allentown, PA")
fill("163", "Hoboken, NJ")
click("171")
obs - **BrowserOutputObservation**
URL: http://miniserver1875.asuscomm.com:3000/directions?engine=fossgis_osrm_car&route=40.5705%2C-75.4885%3B40.7433%2C-74.0324#map=9/40.6489/-74.7653
Status code: 200
Error: False
Open pages: ['http://miniserver1875.asuscomm.com:3000/directions?engine=fossgis_osrm_car&route=40.5705%2C-75.4885%3B40.7433%2C-74.0324#map=9/40.6489/-74.7653']
Active page index: 0
Last browser action: fill("158", "Allentown, PA")
fill("163", "Hoboken, NJ")
click("171")
Last browser action error: 
Focused element bid: 171
CONTENT: <::after>  
  
#  [ OpenStreetMap ](http://miniserver1875.asuscomm.com:3000/#map=9/40.6489/-74.7653)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

[ Edit ](http://miniserver1875.asuscomm.com:3000/edit#map=9/40.6489/-74.7653) <::after>

  * [ Edit with iD (in-browser editor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=id#map=9/40.6489/-74.7653)
  * [ Edit with Remote Control (JOSM, Potlatch, Merkaartor) ](http://miniserver1875.asuscomm.com:3000/edit?editor=remote#map=9/40.6489/-74.7653)



[ History ](http://miniserver1875.asuscomm.com:3000/history#map=9/40.6489/-74.7653) [ Export ](http://miniserver1875.asuscomm.com:3000/export#map=9/40.6489/-74.7653)

  * [ GPS Traces ](/traces)
  * [ User Diaries ](/diary)
  * [ Communities ](/communities)
  * [ Copyright ](/copyright)
  * [ Help ](/help)
  * [ About ](/about)
  * More 
    * [ GPS Traces ](/traces)
    * [ User Diaries ](/diary)
    * [ Communities ](/communities)
    * [ Copyright ](/copyright)
    * [ Help ](/help)
    * [ About ](/about)



[ Log In ](http://miniserver1875.asuscomm.com:3000/login?referer=%2F#map=9/40.6489/-74.7653) [ Sign Up ](/user/new)

Where is this? 

[ ](/directions "Find directions between two points")

Bicycle (OSRM)  Car (OSRM)  Foot (OSRM) 

Reverse Directions 

Loading... 

Loading... 

##  Directions 

Distance: 146km. Time: 1:54. 

|  **1.** Start on unnamed road  |  90m   
---|---|---  
|  **2.** Sharp left onto unnamed road  |  300m   
|  **3.** At the fork turn right onto unnamed road  |  190m   
|  **4.** Turn right onto unnamed road  |  70m   
|  **5.** Turn left onto unnamed road  |  170m   
|  **6.** At the end of the road turn right onto unnamed road  |  200m   
|  **7.** Turn left onto unnamed road  |  100m   
|  **8.** Turn left onto **Lehigh Parkway South** |  900m   
|  **9.** Turn left onto **Park Drive** |  30m   
|  **10.** Turn left onto **Oxford Drive** |  1400m   
|  **11.** Turn left onto **Lehigh Street** |  400m   
|  **12.** Turn right onto the ramp towards **I 78 East, PA 309 South: Bethlehem, Quakertown** |  500m   
|  **13.** Merge left onto **I 78; PA 309** |  109km   
|  **14.** At the fork turn right onto **Phillipsburg-Newark Expressway (I 78)** |  16km   
|  **15.** Continue on **New Jersey Turnpike Newark Bay Extension (I 78; NJTP)** |  9km   
|  **16.** Continue on **New Jersey Turnpike Newark Bay Extension (I 78; NJTP)** |  3.8km   
|  **17.** Turn left onto **Jersey Avenue** |  800m   
|  **18.** Turn left onto **Jackson Street** |  110m   
|  **19.** Turn right onto **Observer Highway** |  200m   
|  **20.** Continue on **Newark Street** |  300m   
|  **21.** Turn left onto **Clinton Street** |  600m   
|  **22.** Turn right onto **5th Street** |  160m   
|  **23.** Turn left onto **Park Avenue** |  60m   
|  **24.** Reach destination  |   
  
Directions courtesy of [ OSRM (FOSSGIS) ](https://routing.openstreetmap.de/about.html)

##  Welcome to OpenStreetMap! 

OpenStreetMap is a map of the world, created by people like you and free to use under an open license. 

Hosting is supported by [ UCL ](https://www.ucl.ac.uk) , [ Fastly ](https://www.fastly.com/) , [ Bytemark Hosting ](https://www.bytemark.co.uk) , and other [ partners ](https://hardware.openstreetmap.org/thanks/) . 

[ Learn More ](/about)

[ Start Mapping ](/user/new)

You are either using a browser that does not support JavaScript, or you have disabled JavaScript. 

OpenStreetMap uses JavaScript for its slippy map. 

####  Map Layers 

  * Standard 
  * CyclOSM 
  * ÖPNVKarte 
  * Humanitarian 



Enable overlays for troubleshooting the map 

  * Map Notes 
  * Map Data 
  * Public GPS Traces 



####  Map Key 

####  Share 

####  Link or HTML 

Include marker 

[ Link ](http://openstreetmap.example.com/#map=9/40.6489/-74.7653) [ Short Link ](http://miniserver1875.asuscomm.com/go/Zcnyd3--) HTML 

  
[View Larger Map](http://openstreetmap.example.com/#map=9/40.6489/-74.7653)">

Paste HTML to embed in website 

####  Geo URI 

[ geo:40.6489,-74.7653?z=9 ](geo:40.6489,-74.7653?z=9)

####  Image 

Only the standard layer can be exported as an image 

Set custom dimensions 

Format:  PNG  JPEG  SVG  PDF 

Scale:  1 : 

Image will show standard layer at  495  x  354 

20 km 

10 mi 

© [ OpenStreetMap contributors ](/copyright) ♥ [ Make a Donation ](https://donate.openstreetmap.org) . [ Website and API terms ](https://wiki.osmfoundation.org/wiki/Terms_of_Use)

Directions from here  Directions to here  Add a note here  Show address  Query features  Centre map here 

https://openstreetmap.org/copyright  |  https://openstreetmap.org   
---|---  
Copyright OpenStreetMap and contributors, under an open license 



Step 12:
act - **MessageAction** (source=EventSource.AGENT)
CONTENT: Finish[146km, 1:54]
obs - NullObservation(content='', observation='null')

Step 13:
act - **MessageAction** (source=EventSource.USER)
CONTENT: Please continue working on the task on whatever approach you think is suitable.

When you think you successfully finished the task, first respond with `Finish[answer]` where you include *only* your answer to the questionin `[]` if the user asks for an answer, make sure you should only include the answer to the question but not any additional explanation, details, or commentary unless specifically requested.
After that, when you responded with your answer, you should respond with <finish></finish>.
Then finally, to exit, you can run <execute_bash>
exit()
</execute_bash>
obs - NullObservation(content='', observation='null')

Step 14:
act - **MessageAction** (source=EventSource.AGENT)
CONTENT: Finish[146km, 1:54]
obs - NullObservation(content='', observation='null')

Step 15:
act - **MessageAction** (source=EventSource.USER)
CONTENT: Please continue working on the task on whatever approach you think is suitable.

When you think you successfully finished the task, first respond with `Finish[answer]` where you include *only* your answer to the questionin `[]` if the user asks for an answer, make sure you should only include the answer to the question but not any additional explanation, details, or commentary unless specifically requested.
After that, when you responded with your answer, you should respond with <finish></finish>.
Then finally, to exit, you can run <execute_bash>
exit()
</execute_bash>
obs - NullObservation(content='', observation='null')

Step 16:
act - **MessageAction** (source=EventSource.AGENT)
CONTENT: Finish[146km, 1:54]
obs - NullObservation(content='', observation='null')

Step 17:
act - **MessageAction** (source=EventSource.USER)
CONTENT: Please continue working on the task on whatever approach you think is suitable.

When you think you successfully finished the task, first respond with `Finish[answer]` where you include *only* your answer to the questionin `[]` if the user asks for an answer, make sure you should only include the answer to the question but not any additional explanation, details, or commentary unless specifically requested.
After that, when you responded with your answer, you should respond with <finish></finish>.
Then finally, to exit, you can run <execute_bash>
exit()
</execute_bash>
obs - NullObservation(content='', observation='null')

